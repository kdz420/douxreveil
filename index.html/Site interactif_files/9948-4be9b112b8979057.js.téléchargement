!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d455dfdc-fd34-481f-b8e6-cb0a62fdc488",e._sentryDebugIdIdentifier="sentry-dbid-d455dfdc-fd34-481f-b8e6-cb0a62fdc488")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9948],{61626:function(e,t,n){let r;n.d(t,{kw:function(){return eL},GJ:function(){return eB}});var o=n(2899),i=n(76038),a=n(59578),l=n(81211),s=n(72242),d=n(64327),c=n(74239),u=n(56672),p=n(4694),f=n(38398),m=n(37330),g=n(69492),v=n(19903),h=n(95541),x=n(40881),y=n(45820),b=n(53952);let k={base:"vs-dark",inherit:!0,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{"editor.background":"#18191B"}},C={base:"vs",inherit:!0,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{"editor.background":"#FDFDFC"}};h._m.config({paths:{vs:window.location.origin+"/vs/"}});let w=()=>h._m.init().then(e=>{r=e,e.editor.defineTheme("dark",k),e.editor.defineTheme("light",C),e.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSyntaxValidation:!0,noSemanticValidation:!0})}).catch(e=>{b.Tb(e)});var _=n(74542);async function j(e,t,n){let r=g.gK.getState();if(!r.conversationId)return!1;try{await r.sendResponse({message:t,parentResponseId:r.lastMessageId,conversationId:r.conversationId,fileAttachmentIds:[],webpageUrls:[],setOpimisticUserResponse:!0,setUserResponse:!0,metadata:{selectedText:n,artifactAction:e}})}catch(e){(0,_.H)("artifact:ask",e)}}var E=n(34116),A=n(51139),T=n(60250),S=n(30430),I=n(3667),N=n(70702),D=n(63994),F=n(15571);let L={resize:"none"};function B(e){let{onSubmit:t}=e,[n,r]=(0,p.useState)(""),{t:i}=(0,N.$G)("chat");return(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(n),r("")},className:"flex gap-1 items-center",role:"form",children:[(0,o.jsx)(F.Z,{value:n,style:L,onChange:e=>{r(e.target.value)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||e.ctrlKey||(e.preventDefault(),t(n),r(""))},minRows:1,maxRows:4,autoFocus:!0,dir:"auto",className:"rounded-xl px-2 border-none shadow-none text-primary focus-visible:ring-0 min-h-[20px] min-w-[220px] resize-none focus:outline-none font-sm bg-popover",placeholder:i("Edit or explainâ€¦")}),(0,o.jsx)(E.zx,{type:"submit",size:"icon",className:"bg-primary h-8 self-end","aria-label":i("Submit"),children:(0,o.jsx)(D.Hf,{size:20})})]})}let z={size:20,className:"text-secondary"};function M(e){let{onAskGrok:t,onExplain:n}=e,[r,i]=(0,p.useState)(!1),{t:a}=(0,N.$G)("chat");return t&&r?(0,o.jsx)("div",{className:"bg-popover border p-1 rounded-2xl flex",children:(0,o.jsx)(B,{onSubmit:t})}):t||n?(0,o.jsx)(A.M,{children:(0,o.jsxs)(I.E.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},className:"bg-popover border p-1 rounded-2xl flex shadow-lg",children:[t?(0,o.jsxs)(E.zx,{variant:"ghost",className:"rounded-xl focus-visible:ring-0 text-primary",onClick:()=>i(!0),children:[(0,o.jsx)(T.Z,{...z}),a("Ask Grok")]}):null,n?(0,o.jsxs)(E.zx,{variant:"ghost",className:"rounded-xl focus-visible:ring-0 text-primary",onClick:n,children:[(0,o.jsx)(S.Z,{...z}),a("explain-button.label","Explain")]}):null]},"selection_menu")}):null}let H=e=>{let{syntax:t,editable:n,value:i,onContentUpdate:a}=e,s=(0,p.useRef)(),d=(0,l.g)(),c=d.SHOW_ARTIFACTS_ASK_GROK_BUTTON,u=d.SHOW_ARTIFACTS_EXPLAIN_BUTTON,{resolvedTheme:f}=(0,x.F)();(0,p.useEffect)(()=>{w()},[]);let m=(0,p.useCallback)(()=>{s.current&&s.current();let e=null==r?void 0:r.editor.getEditors()[0];if(e){var t;let n=e.getSelection();if(!n)return;let i=null===(t=e.getModel())||void 0===t?void 0:t.getValueInRange(n);if(i){let t=document.createElement("div"),a=(0,y.createRoot)(t),l={getId:()=>"selected-text.widget",getDomNode:()=>t,getPosition:()=>r?{position:{lineNumber:n.endLineNumber,column:n.startColumn},preference:[r.editor.ContentWidgetPositionPreference.BELOW,r.editor.ContentWidgetPositionPreference.ABOVE]}:{position:{lineNumber:n.endLineNumber,column:n.startColumn},preference:[]}};a.render((0,o.jsx)("div",{onMouseUp:e=>e.stopPropagation(),children:(0,o.jsx)(M,{onAskGrok:c?t=>(e.removeContentWidget(l),j("ask",t,i)):void 0,onExplain:u?()=>(e.removeContentWidget(l),j("explain","Explain",i)):void 0})})),e.addContentWidget(l),s.current=()=>e.removeContentWidget(l)}}},[]);return(0,o.jsx)("div",{className:"w-full h-full",onMouseUp:m,children:(0,o.jsx)(h.ZP,{height:"100%",width:"100%",language:t,value:i,onChange:a,theme:"dark"===f?"dark":"light",options:{readOnly:!n,contextmenu:!1,suggestOnTriggerCharacters:!1,acceptSuggestionOnEnter:"off",lineNumbers:"off",quickSuggestions:!1,fontFamily:"var(--font-ibm-plex-mono)",fontSize:14,stickyScroll:{enabled:!1},wordBasedSuggestions:"off",wordWrap:"on",parameterHints:{enabled:!1},hover:{enabled:!1},minimap:{enabled:!1},scrollbar:{useShadows:!1},scrollBeyondLastLine:!1,padding:{bottom:30}}})})};var R=n(82095),O=n(73358),P=n(38040),U=n(53429),W=n(75361),Z=n(5893);let $=(e,t)=>{let{t:n}=(0,N.$G)("chat");(0,P.y)(O.gu,async r=>{var o;if(r.preventDefault(),!e||!e.id||!e.title||!e.versionId||e.incomplete||void 0===t)return!1;let i=(0,Z.O)({id:e.id,versionId:e.versionId,text:t,contentType:null!==(o=e.contentType)&&void 0!==o?o:"text/plain",title:e.title});try{if(await (0,U.i4)(e.id,e.versionId,i))W.Am.success(n("artifact.save.success","The changes have been saved"));else throw Error("Failed to save artifacts")}catch(e){b.Tb(e),W.Am.error(n("artifact.save.fail","Failed to save changes"))}},[t])};var G=n(54173),V=n(37305),X=n(42895),q=n(64431),K=n(38742),J=n(10925),Y=n(62484),Q=n(64447),ee=n(23191),et=n(2072),en=n(40093),er=n(34168),eo=n(14999),ei=n(14274),ea=n(99867),el=n(87391),es=n(842),ed=n(44199),ec=n(393),eu=e=>{let{node:t}=e,[n,r]=(0,p.useState)(!1),{t:i}=(0,N.$G)("base"),{resolvedTheme:a}=(0,x.F)(),[l,d]=(0,p.useState)(!1),c=t.attrs.language||"plain",u=(0,p.useCallback)(()=>d(!l),[l]),f=(0,p.useCallback)(()=>{if(""===t.textContent.trim())return;let e=t.textContent;e=e.replace(/(\n)$/,""),navigator.clipboard.writeText(e).then(()=>{r(!0),setTimeout(()=>r(!1),2e3)}).catch(e=>{(0,_.H)("artifact-markdown",e)})},[t.textContent]),m=(0,p.useMemo)(()=>t.textContent.split("\n").length-1,[t.textContent]);return(0,o.jsx)(ee.T5,{className:"codeblock",children:(0,o.jsxs)("div",{className:"relative my-3 -mr-2 right-1 md:-mr-8 md:right-4 border border-border dark:border-none rounded-xl",children:[(0,o.jsx)("div",{className:"flex flex-row px-4 py-2 h-10 items-center rounded-t-xl bg-popover",children:(0,o.jsx)("span",{className:"font-mono text-secondary text-xs",children:c})}),(0,o.jsx)("div",{className:"sticky right-2 z-10 @[1280px]/mainview:z-40 @[1280px]/mainview:top-10 top-28 @[0px]/preview:top-5",children:(0,o.jsxs)("div",{className:"absolute bottom-1 right-1 flex flex-row gap-0.5",children:[(0,o.jsx)(E.zx,{variant:"sticky",size:"sm",onClick:u,children:l?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(el.Z,{className:"size-4"}),(0,o.jsx)("span",{className:"hidden @sm:block",children:i("Expand")})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(es.Z,{className:"size-4"}),(0,o.jsx)("span",{className:"hidden @sm:block",children:i("Collapse")})]})}),(0,o.jsx)(E.zx,{onClick:f,variant:"sticky",size:"sm",disabled:n,children:n?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ed.Z,{className:"size-4"}),(0,o.jsx)("span",{className:"hidden @sm:block",children:i("Copied")})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ec.Z,{className:"size-4"}),(0,o.jsx)("span",{className:"hidden @sm:block",children:i("Copy")})]})})]})}),l?(0,o.jsx)("div",{className:(0,s.cn)("dark"===a?"bg-[#121314]":"bg-foreground","dark"===a?"text-secondary":"text-black","text-[.9em] leading-[1.5em]","rounded-b-[12px] p-[16px]","italic"),children:i("lines",{count:m,defaultValue_one:"{{count}} hidden line",defaultValue_other:"{{count}} hidden lines"})}):(0,o.jsx)("pre",{className:(0,s.cn)("whitespace-pre-wrap break-all overflow-x-auto text-primary bg-foreground dark:bg-[#121314] m-0 rounded-t-none rounded-b-2xl"),children:(0,o.jsx)(ee.ms,{as:"code",spellCheck:"false",className:t.attrs.language?"language-".concat(t.attrs.language):""})})]})})};let ep=/^```([a-z]+)?[\s\n]$/,ef=/^~~~([a-z]+)?[\s\n]$/,em=eo.NB.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;let{languageClassPrefix:n}=this.options;return[...(null===(t=e.firstElementChild)||void 0===t?void 0:t.classList)||[]].filter(e=>e.startsWith(n)).map(e=>e.replace(n,""))[0]||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML(e){let{node:t,HTMLAttributes:n}=e;return["pre",(0,eo.P1)(this.options.HTMLAttributes,n),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>t=>{let{commands:n}=t;return n.setNode(this.name,e)},toggleCodeBlock:e=>t=>{let{commands:n}=t;return n.toggleNode(this.name,"paragraph",e)}}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{let{empty:e,$anchor:t}=this.editor.state.selection,n=1===t.pos;return!!e&&t.parent.type.name===this.name&&(!!n||!t.parent.textContent.length)&&this.editor.commands.clearNodes()},Enter:e=>{let{editor:t}=e;if(!this.options.exitOnTripleEnter)return!1;let{state:n}=t,{selection:r}=n,{$from:o,empty:i}=r;if(!i||o.parent.type!==this.type)return!1;let a=o.parentOffset===o.parent.nodeSize-2,l=o.parent.textContent.endsWith("\n\n");return!!a&&!!l&&t.chain().command(e=>{let{tr:t}=e;return t.delete(o.pos-2,o.pos),!0}).exitCode().run()},ArrowDown:e=>{let{editor:t}=e;if(!this.options.exitOnArrowDown)return!1;let{state:n}=t,{selection:r,doc:o}=n,{$from:i,empty:a}=r;if(!a||i.parent.type!==this.type||i.parentOffset!==i.parent.nodeSize-2)return!1;let l=i.after();return void 0!==l&&(o.nodeAt(l)?t.commands.command(e=>{let{tr:t}=e;return t.setSelection(ei.Y1.near(o.resolve(l))),!0}):t.commands.exitCode())}}},addInputRules(){return[(0,eo.zK)({find:ep,type:this.type,getAttributes:e=>({language:e[1]})}),(0,eo.zK)({find:ef,type:this.type,getAttributes:e=>({language:e[1]})})]},addNodeView:()=>(0,ee.fW)(eu,{stopEvent:e=>"copy"!==e.event.type&&"cut"!==e.event.type&&(console.log(e),!0)})}),eg=[];async function ev(e){if(eg.includes(e)||!r)return!1;try{return await r.editor.colorize("",e,{}),eg.push(e),!0}catch(e){return b.Tb(e),!1}}async function eh(e){let{}=e;r||await w()}let ex="light";function ey(e){let{doc:t,name:n}=e,o=[];for(let e of(0,eo.N2)(t,e=>e.type.name===n)){var i,a,l;let t=e.pos+1,n=e.node.attrs.language,s=null!==(i=null==r?void 0:r.editor.tokenize(e.node.textContent,n))&&void 0!==i?i:[[]],d=e.node.textContent.split("\n");for(let e=0;e<s.length;e++){let n=d[e].length,r=s[e];for(let e=0;e<r.length;e++){let i=r[e],s=t+i.offset,d=t+(null!==(l=null===(a=r[e+1])||void 0===a?void 0:a.offset)&&void 0!==l?l:n),c=function(e,t){var n;let r=e.rules.filter(e=>t.startsWith(e.token)).reduce((e,t)=>t.token.length>e.token.length?t:e,{token:""});return{color:(null==r?void 0:r.foreground)?"#".concat(r.foreground):void 0,fontStyle:null!==(n=null==r?void 0:r.fontStyle)&&void 0!==n?n:"normal"}}("dark"===ek()?k:C,i.type),u=ea.p.inline(s,d,{style:c.color?"color: ".concat(c.color):void 0});o.push(u)}t+=n+1}}return ea.EH.create(t,o)}let eb=em.extend({name:"codeBlock",addKeyboardShortcuts(){var e;return{...null===(e=this.parent)||void 0===e?void 0:e.call(this),ArrowUp:e=>{let{editor:t}=e;if(!this.options.exitOnArrowUp)return!1;let{state:n}=t,{selection:r}=n,{$from:o,empty:i}=r;if(!i||o.parent.type!==this.type||0!==o.parentOffset)return!1;let a=o.before();return void 0!==a&&0===a&&t.commands.insertContentAt({from:0,to:0},{type:"paragraph"})},"Shift-Enter":e=>{let{editor:t}=e;if(!this.options.exitOnTripleEnter)return!1;let{state:n}=t,{selection:r}=n,{$from:o,empty:i}=r;if(!i||o.parent.type!==this.type)return!1;let a=o.parentOffset===o.parent.nodeSize-2,l=o.parent.textContent.endsWith("\n\n");return!!a&&!!l&&t.chain().command(e=>{let{tr:t}=e;return t.delete(o.pos-2,o.pos),!0}).exitCode().run()}}},addOptions(){var e;return{...null===(e=this.parent)||void 0===e?void 0:e.call(this),theme:ek(),exitOnArrowUp:!0}},addProseMirrorPlugins(){var e;return[...(null===(e=this.parent)||void 0===e?void 0:e.call(this))||[],new ei.Sy({key:new ei.H$("monaco"),view(e){let t=this.name;class n{update(e,t){this.checkUndecoratedBlocks()}destroy(){}async initDecorations(){let n=e.state.doc;await eh({doc:n,name:t});let r=e.state.tr.setMeta("monacoPluginForceDecoration",!0);e.dispatch(r)}async checkUndecoratedBlocks(){var t;let n=(0,eo.N2)(e.state.doc,e=>"codeBlock"===e.type.name);if((await Promise.all(n.map(e=>ev(e.node.attrs.language)))).includes(!0)){let t=e.state.tr.setMeta("monacoPluginForceDecoration",!0);e.dispatch(t)}let r=null!==(t=document.documentElement.style.getPropertyValue("color-scheme"))&&void 0!==t?t:"light";if(r!==ex){ex=r;let t=e.state.tr.setMeta("monacoPluginForceDecoration",!0);e.dispatch(t)}}constructor(){this.initDecorations()}}return new n},state:{init:(e,t)=>{let{doc:n}=t;return ey({doc:n,name:this.name,theme:this.options.theme})},apply:(e,t,n,r)=>{let o=n.selection.$head.parent.type.name,i=r.selection.$head.parent.type.name,a=(0,eo.N2)(n.doc,e=>e.type.name===this.name),l=(0,eo.N2)(r.doc,e=>e.type.name===this.name),s=e.docChanged&&([o,i].includes(this.name)||l.length!==a.length||e.steps.some(e=>void 0!==e.from&&void 0!==e.to&&a.some(t=>t.pos>=e.from&&t.pos+t.node.nodeSize<=e.to))),d=e.getMeta("themeChange");return e.getMeta("monacoPluginForceDecoration")||d||s?(d&&(this.options.theme=d),ey({doc:e.doc,name:this.name,theme:this.options.theme})):t.map(e.mapping,e.doc)}},props:{decorations(e){return this.getState(e)}}})]}});function ek(){var e;return null!==(e=document.documentElement.style.getPropertyValue("color-scheme"))&&void 0!==e?e:"light"}var eC=n(97404),ew=n(41811),e_=n(98450),ej=n(70656),eE=n(32701),eA=n(27414);let eT="text-secondary hover:text-primary hover",eS=e=>{var t;let{editor:n,editable:r}=e;(0,ee.sZ)({editor:n,selector:e=>e.transactionNumber});let{t:i}=(0,N.$G)("chat"),{client:a}=(0,c.useStatsigClient)(),l=function(e){let{t}=(0,N.$G)("chat"),{client:n}=(0,c.useStatsigClient)();return[{label:t("text.size.normal","Normal text"),isActive:e.isActive("paragraph"),select:()=>{e.chain().focus().setParagraph().run(),n.logEvent("artifact_text_tool_paragraph_selected",void 0,{})}},{label:t("text.size.heading1","Heading 1"),isActive:e.isActive("heading",{level:1}),className:"text-[17px] font-bold",select:()=>{e.chain().focus().setHeading({level:1}).run(),n.logEvent("artifact_text_tool_heading1_selected",void 0,{})}},{label:t("text.size.heading2","Heading 2"),isActive:e.isActive("heading",{level:2}),className:"text-[16px] font-bold",select:()=>{e.chain().focus().setHeading({level:2}).run(),n.logEvent("artifact_text_tool_heading2_selected",void 0,{})}},{label:t("text.size.heading3","Heading 3"),isActive:e.isActive("heading",{level:3}),className:"text-[15px] font-bold",select:()=>{e.chain().focus().setHeading({level:3}).run(),n.logEvent("artifact_text_tool_heading3_selected",void 0,{})}}]}(n),d=r&&null!==(t=l.find(e=>e.isActive))&&void 0!==t?t:l[0];return(0,o.jsxs)("div",{className:(0,s.cn)("flex items-center relative",r?void 0:"opacity-50 pointer-events-none"),children:[(0,o.jsxs)(eC.h_,{children:[(0,o.jsx)(eC.$F,{asChild:!0,children:(0,o.jsxs)(E.zx,{variant:"ghost",size:"sm",className:"p-1 w-32 flex justify-between px-4 overflow-hidden rounded-full text-secondary hover:text-primary",children:[d.label,(0,o.jsx)(D.v4,{strokeWidth:2,className:"size-5 sm:size-4 opacity-50"})]})}),(0,o.jsx)(eC.AW,{side:"bottom",align:"end",sideOffset:6,className:"min-w-36 space-y-0.5",children:l.map(e=>(0,o.jsx)(eC.Xi,{onClick:e.select,className:e.className,children:e.label},e.label))})]}),(0,o.jsx)(ew.Z,{orientation:"vertical",className:"h-8 mr-2 ml-1"}),(0,o.jsx)(E.g$,{variant:"ghost",size:"iconMd",onClick:()=>{n.chain().focus().toggleBold().run(),a.logEvent("artifact_text_tool_bold_toggled",void 0,{enabled:n.isActive("bold").toString()})},className:(0,s.cn)(eT,r&&n.isActive("bold")?"bg-toggle-hover text-primary":""),tooltipContent:i("text.style.bold","Bold"),"aria-label":i("text.style.bold","Bold"),children:(0,o.jsx)(e_.X20,{className:"!size-5"})}),(0,o.jsx)(E.g$,{variant:"ghost",size:"iconMd",onClick:()=>{n.chain().focus().toggleItalic().run(),a.logEvent("artifact_text_tool_italic_toggled",void 0,{enabled:n.isActive("italic").toString()})},className:(0,s.cn)(eT,r&&n.isActive("italic")?"bg-toggle-hover text-primary":""),tooltipContent:i("text.style.italic","Italic"),"aria-label":i("text.style.italic","Italic"),children:(0,o.jsx)(e_.MzY,{className:"!size-5"})}),(0,o.jsx)(E.g$,{variant:"ghost",size:"iconMd",onClick:()=>{n.chain().focus().toggleUnderline().run(),a.logEvent("artifact_text_tool_underline_toggled",void 0,{enabled:n.isActive("underline").toString()})},className:(0,s.cn)(eT,r&&n.isActive("underline")?"bg-toggle-hover text-primary":""),tooltipContent:i("text.style.underline","Underline"),"aria-label":i("text.style.underline","Underline"),children:(0,o.jsx)(ej.Z,{size:18})}),(0,o.jsx)(ew.Z,{orientation:"vertical",className:"h-8 ml-2 mr-1"}),(0,o.jsx)(E.g$,{variant:"ghost",size:"iconMd",onClick:()=>{n.chain().focus().toggleList("bulletList","listItem").run(),a.logEvent("artifact_text_tool_bullet_list_toggled",void 0,{enabled:n.isActive("bulletList").toString()})},className:(0,s.cn)(eT,r&&n.isActive("bulletList")?"bg-toggle-hover text-primary":""),tooltipContent:i("text.format.list","List"),"aria-label":i("text.format.list","Strike-through"),children:(0,o.jsx)(eE.Z,{size:18})}),(0,o.jsx)(E.g$,{variant:"ghost",size:"iconMd",onClick:()=>{n.chain().focus().toggleOrderedList().run(),a.logEvent("artifact_text_tool_ordered_list_toggled",void 0,{enabled:n.isActive("orderedList").toString()})},className:(0,s.cn)(eT,r&&n.isActive("orderedList")?"bg-toggle-hover text-primary":""),tooltipContent:i("text.format.ordered-list","Ordered list"),"aria-label":i("text.format.ordered-list","Ordered list"),children:(0,o.jsx)(eA.Z,{size:19})})]})},eI=n(82554).EK.extend({renderHTML(e){let{HTMLAttributes:t}=e;return["span",(0,eo.P1)(t,{class:"text-sm px-1 rounded-sm !font-mono bg-sunset/10 text-rust dark:bg-dawn/10 dark:text-dawn"}),""]}}),eN=[et.Z,q.ZP.configure({resizable:!0}),Y.Z.configure({HTMLAttributes:{class:"border-border"}}),J.Z,K.Z,en.U,eI,eb,er.ZP.configure({types:["heading","paragraph","bulletList","orderedList"]}),Q.Z],eD=e=>{let{content:t,editable:n,onSetMenu:r,setContent:i}=e,{theme:a}=(0,x.F)(),l=(0,ee.jE)({extensions:eN,content:t,editable:n,onTransaction:e=>{let{editor:t,transaction:r}=e;n&&i(t.storage.markdown.getMarkdown())}});return(0,p.useEffect)(()=>{l&&l.commands.command(()=>!0)},[a]),(0,p.useEffect)(()=>{if(!l||l.view.hasFocus())return;let{from:e,to:n}=l.state.selection;try{l.commands.setContent(t)}catch(e){b.Tb(e)}l.commands.setTextSelection({from:e,to:n})},[!!l,t]),(0,p.useEffect)(()=>{l&&l.setEditable(n)},[n]),(0,p.useEffect)(()=>{if(l&&r)return r((0,o.jsx)(eS,{editor:l,editable:n})),()=>r(void 0)},[l,r,n]),(0,o.jsx)("div",{className:"[&_.ProseMirror]:!outline-0 [&_.ProseMirror]:!h-full [&_h1]:leading-10 [&_h2]:leading-8 [&_h2]:mb-2 [&_p_strong]:font-bold h-full",children:(0,o.jsx)(ee.kg,{editor:l,className:"h-full"})})},eF=e=>{let{children:t,onAskGrok:n,onExplain:r,disabled:i}=e,a=(0,p.useRef)(null),s=(0,l.g)(),d=s.SHOW_ARTIFACTS_ASK_GROK_BUTTON,c=s.SHOW_ARTIFACTS_EXPLAIN_BUTTON,[u,f]=p.useState(""),[m,g]=p.useState({left:0,top:0}),v=p.useCallback(()=>{i||setTimeout(()=>{let e=window.getSelection();if(e){let t=e.toString().trim();if(t.length>0){let n=e.getRangeAt(0).getBoundingClientRect(),r=0,o=0;if(a.current){let e=a.current.getBoundingClientRect();r=e.left,o=e.top}g({left:n.left-r,top:n.bottom-o}),f(t)}else f("")}},0)},[i]),h=p.useCallback(e=>(f(""),n(u,e)),[u]),x=p.useCallback(()=>(f(""),r(u)),[u]),y=p.useCallback(()=>{let e=()=>{v(),window.removeEventListener("mouseup",e)};window.addEventListener("mouseup",e)},[v]);return(0,p.useEffect)(()=>{let e=()=>{f(""),window.removeEventListener("mousedown",e)};return""!==u&&window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)},[u]),(0,o.jsxs)("div",{onMouseDown:y,onMouseUp:v,ref:a,className:"relative h-full w-full",children:[t,""!==u?(0,o.jsx)("div",{className:"absolute",style:{top:m.top+10,left:m.left},onMouseDown:e=>e.stopPropagation(),onMouseUp:e=>e.stopPropagation(),children:(0,o.jsx)(M,{onAskGrok:d?h:void 0,onExplain:c?x:void 0})}):null]})};function eL(e){var t,n,r;let{artifact:i,onSetMenu:h,readOnly:x}=e,{mode:y,setMode:b,isRefreshing:k}=(0,d.nf)(),{isLoading:C}=(0,X.g)(i),w=(0,c.useStatsigClient)(),_=(0,f.Z)(),E=(0,p.useRef)(_.pathname),A=(0,p.useRef)(null),T=(0,l.g)(),S=(0,g.gK)(u.Z("setSidePanelContent")),I=["text/plain","text/markdown"],N=["text/html",...I].includes(null!==(t=i.contentType)&&void 0!==t?t:""),D=(0,v.L2)(i),{onTextUpdate:F}=(0,Z.K)({artifact:i,isAllowSaving:!0}),L=(0,p.useRef)(i);L.current=i;let B=(0,p.useCallback)(e=>{L.current.incomplete||F(L.current,e)},[F]);(0,p.useEffect)(()=>{var e;w.logEvent("artifact_shown",void 0,{contentType:null!==(e=i.contentType)&&void 0!==e?e:"undefined"})},[i.id]),(0,p.useEffect)(()=>{E.current!==_.pathname&&S(void 0)},[_.pathname]);let z=i.contentType&&!I.includes(i.contentType),M=i.incomplete?m._I:m.Cn,O=z?y:"preview";(0,p.useEffect)(()=>{b(i.incomplete||!N?"code":"preview")},[i.id,i.incomplete]);let P=ez(i.contentType),U=(0,p.useCallback)((e,t)=>{var n;return w.logEvent("artifact_ask_grok_clicked",void 0,{contentType:null!==(n=i.contentType)&&void 0!==n?n:"undefined"}),j("ask",t,e)},[i.contentType]),W=(0,p.useCallback)(e=>{var t;return w.logEvent("artifact_explain_clicked",void 0,{contentType:null!==(t=i.contentType)&&void 0!==t?t:"undefined"}),j("explain","Explain",e)},[i.contentType]),q=(0,V.G)(i);$(i,q);let[K,J,Y]=(0,a.y)(null!=q?q:"",null!==(n=ez(i.contentType))&&void 0!==n?n:"");(0,p.useEffect)(()=>{D&&"preview"===O&&!i.incomplete&&K()},[D,q,O,i.incomplete]);let Q=(0,G.g)(i,null!=q?q:""),ee=(0,p.useMemo)(()=>{var e;return e=null!=q?q:"",(0,v.qy)(i)?function(e){let t=getComputedStyle(document.documentElement).getPropertyValue("--background").trim(),n=getComputedStyle(document.documentElement).getPropertyValue("color").trim();return'\n<html>\n  <head>\n    <script src="https://cdn.jsdelivr.net/pyodide/v0.27.3/full/pyodide.js"></script>\n    <script id="python-script" type="text/python">\n'.concat(e,"\ndef task_done_callback(task):\n  exc = task.exception()\n  if exc:\n    import traceback\n    traceback.print_exception(exc)\n\nimport asyncio\nfor task in asyncio.all_tasks():\n  task.add_done_callback(task_done_callback)\n    </script>\n    <style>\n      * {\n        font-family: Menlo, monospace;\n      }\n      #repl-container {\n        background-color: #111111;\n        color: white;\n        padding-left: 16px;\n        padding-right: 10px;\n        padding-bottom: 5px;\n        margin: 0px;\n      }\n      #input {\n        background-color: transparent;\n        border: none;\n        color: white;\n        width: 100%;\n        resize: none;\n        min-height: 1em;\n        overflow: hidden;\n        font-size: 16px;\n        outline: none; /* Added to remove active border */\n      }\n      #output {\n        margin: 0px;\n        padding-top: 1em;\n        padding-bottom: 0px;\n        background-color: transparent;\n        border: none;\n        color: white;\n        width: 100%;\n        resize: none;\n        min-height: 1em;\n        max-height: 80vh;\n        overflow: auto;\n        white-space: pre-wrap;\n        overflow-wrap: break-word;\n        font-size: 16px;\n      }\n      #doc-container {\n        color: ").concat(n,';\n        font-size: 12px;\n        padding-left: 16px;\n        padding-right: 10px;\n        padding-bottom: 5px;\n      }\n      #canvas {\n        max-width: 100%;\n        max-height: 100%;\n        object-fit: contain;\n      }\n      .center-canvas {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        height: 100vh;\n      }\n    </style>\n  </head>\n  <body style="background-color: ').concat(t,';">\n    <div id="repl-container">\n      <pre id="output">Loading...\n</pre>\n      <div style="display: flex; align-items: center">\n        <span style="padding-right: 5px">>>></span>\n        <textarea id="input" rows="1" style="flex: 1" placeholder=""></textarea>\n      </div>\n    </div>\n    <div id="canvas-container">\n      <canvas id="canvas" width="1" height="1" onresize="onCanvasResize()"></canvas>\n    </div>\n    <div id="chart-container">\n    </div>\n    <script>\n      let pyodide;\n      let commandHistoryIdx = 0;\n      let commandHistory = [];\n      let outputDiv;\n      let inputArea;\n      let chartContainer;\n      let replContainer;\n      let canvasContainer;\n      function generateCommandHistory() {\n        const regex = />>> (.+?)$/gm;\n        const matches = outputDiv.innerText.matchAll(regex);\n        const capturedGroups = Array.from(matches).map((match) => match[1]);\n        return capturedGroups;\n      }\n\n      function onCanvasResize() {\n        outputDiv.style.maxHeight = "10em";\n      }\n\n      var seenCanvas = new Set();\n      function redirectCanvas() {\n        const observer = new MutationObserver((mutations) => {\n          mutations.forEach((mutation) => {\n            mutation.addedNodes.forEach((node) => {\n              // Check if the node is a DIV that might contain a canvas\n              if (node.tagName === "DIV") {\n                const matplotlibCanvas = node.querySelector("canvas");\n                if (matplotlibCanvas) {\n                  if (seenCanvas.has(matplotlibCanvas.id)) {\n                    return;\n                  }\n                  seenCanvas.add(matplotlibCanvas.id);\n                  node.remove()\n                  matplotlibCanvas.remove();\n                  if (matplotlibCanvas.id.includes("rubberband")) {\n                    return;\n                  }\n\n                  const imageData = matplotlibCanvas.toDataURL(\'image/png\');\n                  const img = document.createElement(\'img\');\n                  img.src = imageData;\n                  img.style.maxWidth = "100%";\n                  img.style.maxHeight = "100%";\n                  img.style.objectFit = "contain";\n                  chartContainer.appendChild(img);\n\n                  outputDiv.style.maxHeight = "10em";\n\n                  const originalCanvas = document.getElementById("canvas");\n                  if (originalCanvas) {\n                    originalCanvas.remove();\n                  }\n                }\n              }\n            });\n          });\n        });\n\n        observer.observe(document.body, { childList: true, subtree: true });\n      }\n\n      function streamOutput(text) {\n        if (outputDiv.textContent)\n        {\n          outputDiv.textContent += "\\n" + text;\n        }\n        else\n        {\n          outputDiv.textContent = text;\n        }\n        outputDiv.scrollTop = outputDiv.scrollHeight; // Auto-scroll\n        commandHistory = generateCommandHistory().reverse();\n      }\n\n      let stderrOutput = "";\n      function createStderrHandler() {\n        return {\n          write(text) {\n            replContainer.style.display = "block";\n\n            if (typeof text === \'object\') {\n              text = new TextDecoder().decode(text);\n            }\n\n            if (!stderrOutput)\n            {\n              outputDiv.textContent += "\\n";\n            }\n            stderrOutput += text;\n            console.error(\'STDERR:\', text);\n            outputDiv.textContent += text;\n            outputDiv.scrollTop = outputDiv.scrollHeight; // Auto-scroll\n            return text.length;\n          },\n          flush() {\n            outputDiv.textContent += "\\n";\n            stderrOutput = "";\n          }\n        };\n      }\n\n      async function main() {\n        redirectCanvas();\n\n        outputDiv = document.getElementById("output");\n        inputArea = document.getElementById("input");\n        chartContainer = document.getElementById("chart-container");\n        replContainer = document.getElementById("repl-container");\n        canvasContainer = document.getElementById("canvas-container");\n\n        pyodide = await loadPyodide();\n        pyodide._api._skip_unwind_fatal_error = true;\n        pyodide.setStdout({ batched: streamOutput });\n        pyodide.setStderr(createStderrHandler());\n\n        const sdl2Canvas = document.getElementById("canvas");\n        pyodide.canvas.setCanvas2D(sdl2Canvas);\n\n        await pyodide.loadPackage("micropip");\n        const micropip = pyodide.pyimport("micropip");\n        await micropip.install("pygame-ce");\n        await micropip.install("matplotlib");\n        outputDiv.textContent = "";\n\n        const pythonCode = document.getElementById("python-script");\n        await pyodide.loadPackagesFromImports(pythonCode?.textContent);\n\n        pyodide.runPythonAsync(pythonCode?.textContent).then(function(msg) {\n          if (pythonCode?.textContent.includes("import pygame")) {\n            replContainer.style.display = "none";\n            canvasContainer.classList.add("center-canvas");\n          }\n          if (pythonCode?.textContent.includes("import matplotlib")) {\n            replContainer.style.display = "none";\n          }\n        }).catch(function(msg) {\n          outputDiv.textContent = msg;\n        });\n\n        inputArea.focus();\n        inputArea.addEventListener("keydown", handleInput);\n\n      }\n\n      async function handleInput(event) {\n        if (\n          event.key === "ArrowUp" &&\n          commandHistoryIdx + 1 < commandHistory.length\n        ) {\n          commandHistoryIdx++;\n          inputArea.value = commandHistory[commandHistoryIdx];\n          setTimeout(() => {\n            inputArea.selectionStart = inputArea.value.length;\n            inputArea.selectionEnd = inputArea.value.length;\n          }, 0);\n        } else if (event.key === "ArrowDown" && commandHistoryIdx >= 0) {\n          commandHistoryIdx--;\n          inputArea.value = commandHistory[commandHistoryIdx] || "";\n          setTimeout(() => {\n            inputArea.selectionStart = inputArea.value.length;\n            inputArea.selectionEnd = inputArea.value.length;\n          }, 0);\n        } else if (event.key === "Enter" && !event.shiftKey) {\n          event.preventDefault();\n          const code = inputArea.value.trim();\n\n          if (code) {\n            outputDiv.textContent += "\\n>>> " + code;\n            inputArea.disabled = true;\n\n            try {\n              const result = await pyodide.runPythonAsync(code);\n              if (result !== undefined) {\n                outputDiv.textContent += "\\n" + result;\n              }\n            } catch (error) {\n              if (error.message)\n                outputDiv.textContent += "\\nError: " + error.message;\n            }\n            outputDiv.scrollTop = outputDiv.scrollHeight; // Auto-scroll\n            inputArea.disabled = false;\n            inputArea.value = "";\n            inputArea.focus();\n            commandHistory = generateCommandHistory().reverse();\n            commandHistoryIdx = -1;\n          }\n        }\n      }\n      main();\n    </script>\n  </body>\n</html>')}(e):(0,v.L5)(i)?"\n<script>\nvar _grok_errors = [];\nvar _grok_errorContainer;\nvar _grok_errorMessageContainer;\nfunction htmlEscape(str) {\n    if (!str || typeof str !== 'string') return str;\n    return str\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/\"/g, '&quot;')\n        .replace(/'/g, '&#39;');\n}\nfunction logError(message) {\n  message = htmlEscape(message);\n  if (!_grok_errorContainer) {\n    _grok_errorContainer = document.createElement('div');\n    _grok_errorContainer.style.position = 'fixed';\n    _grok_errorContainer.style.top = '10px';\n    _grok_errorContainer.style.right = '10px';\n    _grok_errorContainer.style.width = '50%';\n    _grok_errorContainer.style.minWidth = '300px';\n    _grok_errorContainer.style.backgroundColor = 'white';\n    _grok_errorContainer.style.border = '1px solid #ccc';\n    _grok_errorContainer.style.borderRadius = '8px';\n    _grok_errorContainer.style.padding = '5px 10px';\n    _grok_errorContainer.style.zIndex = '1000';\n    _grok_errorContainer.style.boxShadow = '0 2px 4px rgba(0, 0, 0, 0.1)';\n    document.body.appendChild(_grok_errorContainer);\n\n    _grok_errorMessageContainer = document.createElement('div');\n    _grok_errorContainer.appendChild(_grok_errorMessageContainer);\n\n    var dismissButton = document.createElement('button');\n\n    dismissButton.textContent = 'x';\n    dismissButton.style.position = 'absolute';\n    dismissButton.style.top = '10px';\n    dismissButton.style.right = '10px';\n    dismissButton.style.zIndex = '1001';\n    dismissButton.style.cursor = 'pointer';\n    dismissButton.style.backgroundColor = 'red';\n    dismissButton.style.color = 'white';\n    dismissButton.style.border = 'none';\n    dismissButton.style.borderRadius = '4px';\n    dismissButton.style.padding = '5px 10px';\n    _grok_errorContainer.appendChild(dismissButton);\n\n    dismissButton.addEventListener('click', function(e) {\n      _grok_errorContainer.style.display = 'none';\n    });\n  }\n  _grok_errors.push(message);\n  _grok_errorMessageContainer.innerHTML = '<pre style=\"white-space: pre-wrap; word-wrap: break-word;\"><b>JavaScript Errors</b>\\n\\n' + _grok_errors.join('<hr/>') + '</pre>';\n}\nwindow.onerror = (message) => {\n  logError(message);\n};\nwindow.onunhandledrejection = function(event) {\n  logError(event.reason);\n};\n\nvar OriginalXHR = window.XMLHttpRequest;\nwindow.XMLHttpRequest = function () {\n  const xhr = new OriginalXHR();\n  var requestUrl = \"\"\n\n  var originalOpen = xhr.open;\n  xhr.open = function (method, url, ...args) {\n    requestUrl = url;\n    originalOpen.apply(xhr, [method, url, ...args]);\n  };\n\n  xhr.addEventListener('error', (event) => {\n    logError('XMLHttpRequest error for URL: ' + (xhr.responseURL || requestUrl));\n  });\n\n  xhr.addEventListener('timeout', () => {\n    logError('XMLHttpRequest timeout');\n  });\n  xhr.addEventListener('load', () => {\n    if (xhr.status >= 400) {\n      logError('XMLHttpRequest HTTP error: ' + xhr.responseURL + ' returned ' + xhr.status + ' ' + xhr.statusText);\n    }\n  });\n  return xhr;\n};\n\nvar originalFetch = window.fetch;\nwindow.fetch = function (...args) {\n\n  return originalFetch(...args)\n    .catch((error) => {\n      logError('Global fetch network error: ' + error);\n      throw error;\n    })\n    .then((response) => {\n      if (!response.ok) {\n        logError('Fetch HTTP error: ' + response.url + ' returned ' + response.status + ' ' + response.statusText);\n      }\n      return response;\n    });\n};\n\nconsole.error = function(message, ...args) {\n  // If there are additional arguments, apply basic string formatting\n  if (args.length > 0) {\n    let formattedMessage = message;\n    args.forEach((arg, index) => {\n      formattedMessage = formattedMessage.replace(/%[sd]/, arg);\n    });\n    logError(formattedMessage);\n  } else {\n    logError(message);\n  }\n};\n\n</script>\n<script>\n  document.addEventListener('click', function(event) {\n    const anchor = event.target.closest('a');\n    if (anchor && anchor.getAttribute('href').startsWith('#')) {\n      event.preventDefault();\n      const targetId = anchor.getAttribute('href').substring(1);\n      const targetElement = document.getElementById(targetId);\n      if (targetElement) {\n        targetElement.scrollIntoView({ behavior: 'smooth' });\n      }\n    }\n  });\n</script>"+(Q+e):e},[i,q,Q]),et=!x&&T.ENABLE_ARTIFACTS_EDITING&&!i.incomplete&&!C,en=I.includes(null!==(r=i.contentType)&&void 0!==r?r:"");return(0,o.jsx)("div",{className:"bg-foreground dark:bg-background h-full w-full overflow-y-auto",ref:A,children:(0,o.jsx)("div",{className:"h-full w-full flex flex-col",children:(0,o.jsxs)("div",{className:(0,s.cn)("bg-background-secondary flex-1 flex relative flex-col"),children:["preview"===O&&(0,o.jsx)("div",{className:(0,s.cn)("flex-1 bg-background-secondary",en?void 0:"absolute w-full h-full left-0 z-10"),children:en?(0,o.jsx)("div",{className:"prose w-full h-full p-6 md:p-8 max-w-4xl mx-auto",children:(0,o.jsx)(eF,{onAskGrok:U,onExplain:W,disabled:i.incomplete,children:T.ENABLE_ARTIFACTS_EDITING&&!x?(0,o.jsx)(eD,{content:null!=q?q:"",editable:et,setContent:B,onSetMenu:h}):(0,o.jsx)(M,{sender:"",xposts:[],webSearchResults:[],children:null!=q?q:""})})}):(0,o.jsxs)(o.Fragment,{children:[!k&&!i.incomplete&&!D&&(0,o.jsx)(eB,{srcDoc:ee,autofocus:!0})," ",(0,o.jsx)(R.Y,{runCodeResult:J,isRunningCode:Y})]})}),en?null:(0,o.jsx)(H,{syntax:eH(P),editable:et,value:String(null!=q?q:"").replace(/\n$/,""),onContentUpdate:B})]})})})}function eB(e){let{srcDoc:t,autofocus:n}=e,{nonce:r}=(0,i.O)(),a=(0,p.useRef)(null),{isIframeReady:l,injectHTML:s}=(0,v.aX)({iframeRef:a});return(0,p.useEffect)(()=>{s(t)},[l,t]),(0,o.jsx)("iframe",{className:"w-full h-full",sandbox:"allow-scripts allow-same-origin",src:"https://artifacts.grokusercontent.com",ref:a,nonce:r,onLoad:()=>{if(n){var e,t;null===(t=a.current)||void 0===t||null===(e=t.contentWindow)||void 0===e||e.focus()}}})}function ez(e){if(e){if(e.startsWith("text/x-c++src"))return"cpp";if(e.startsWith("text/")){let t=e.slice(5);if(t)return t}if(e.startsWith("text/x-")){let t=e.slice(7);if(t)return t}}}let eM={jsx:"javascript",tsx:"typescript"},eH=e=>{var t;return e&&null!==(t=eM[e])&&void 0!==t?t:e}},19903:function(e,t,n){n.d(t,{L2:function(){return s},L5:function(){return c},aX:function(){return o},qy:function(){return a}});var r=n(4694);let o=e=>{let{iframeRef:t}=e,[n,o]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=()=>o(!0);return t.current&&t.current.addEventListener("load",()=>o(!0)),()=>{var n;null===(n=t.current)||void 0===n||n.removeEventListener("load",e)}},[t.current]),{isIframeReady:n,injectHTML:(0,r.useCallback)(e=>{var n;(null===(n=t.current)||void 0===n?void 0:n.contentWindow)&&t.current.contentWindow.postMessage({type:"html",html:e},"https://artifacts.grokusercontent.com")},[])}},i=["text/x-python","text/python"];function a(e){var t;return i.includes(null!==(t=e.contentType)&&void 0!==t?t:"")}let l=["text/cpp","text/c","text/x-c++src","text/javascript","text/typescript","text/bash",...i];function s(e){var t,n;return!(a(e)&&(null===(t=e.content)||void 0===t?void 0:t.includes("import pygame")))&&l.includes(null!==(n=e.contentType)&&void 0!==n?n:"")}let d=["text/html"];function c(e){var t;return d.includes(null!==(t=e.contentType)&&void 0!==t?t:"")}},85632:function(e,t,n){n.d(t,{z:function(){return O}});var r=n(2899),o=n(63994),i=n(34116),a=n(94408),l=n(81211),s=n(69735),d=n(64327),c=n(53952),u=n(74239),p=n(98145),f=n(29626),m=n(393),g=n(26353),v=n(64011),h=n(4694),x=n(70702),y=n(75361),b=n(19903),k=n(54173),C=n(37305),w=n(37446),_=n(85635),j=n(73637),E=n(11346);let A=["text/plain","text/markdown"];function T(e){var t;let{artifact:n}=e,{mode:o,setMode:i}=(0,d.nf)(),{t:a}=(0,x.$G)("chat"),l=["text/html",...A].includes(null!==(t=n.contentType)&&void 0!==t?t:"");return(0,h.useEffect)(()=>{i(n.incomplete||!l?"code":"preview")},[n.id,n.incomplete,l,i]),(0,r.jsx)(_.mQ,{className:"flex-1 flex-row justify-center flex",defaultValue:"code",value:o,onValueChange:e=>i(e),children:(0,r.jsxs)(_.dr,{children:[(0,r.jsxs)(_.SP,{className:"gap-1",value:"code","aria-label":a("Code"),children:[(0,r.jsx)(j.Z,{className:"size-4"}),(0,r.jsx)("span",{className:"hidden md:inline",children:a("Code")})]}),(0,r.jsxs)(_.SP,{className:"gap-1",value:"preview","aria-label":a("Preview"),disabled:n.incomplete,children:[n.incomplete?(0,r.jsx)(w.$,{size:"xxs"}):(0,r.jsx)(E.Z,{className:"size-3"}),(0,r.jsx)("span",{className:"hidden md:inline",children:a("Preview")})]})]})})}var S=n(19788);async function I(e){var t;let n=S.TU.parse(e,{async:!1,breaks:!0,gfm:!0}),r=new Blob([n],{type:"text/html"}),o=document.createElement("div");o.innerHTML=n;let i=[new ClipboardItem({"text/plain":new Blob([null!==(t=o.textContent)&&void 0!==t?t:""],{type:"text/plain"}),"text/html":r})];try{return await navigator.clipboard.write(i),!0}catch(e){return c.Tb(e),!1}}var N=n(69492),D=n(97404),F=n(17010),L=n(72242),B=n(62719),z=n(41370),M=n(42895),H=n(28116);let R=e=>{let{artifact:t,readOnly:n}=e,{setSidePanelContent:o,sidePanelContent:a}=(0,N.gK)(),{client:l}=(0,u.useStatsigClient)(),{versions:s,isLoading:d}=(0,M.g)(t),{t:c}=(0,x.$G)("chat"),p=(0,h.useMemo)(()=>{var e;return[...null!==(e=null==s?void 0:s.artifacts)&&void 0!==e?e:[]].reverse().filter(e=>"string"==typeof e.fullArtifact).map(e=>({...e,artifact:(0,H.u)(e.fullArtifact)}))},[null==s?void 0:s.artifacts]),f=(0,h.useCallback)(e=>{if(e){var n;l.logEvent("artifact_versions_open",void 0,{contentType:null!==(n=t.contentType)&&void 0!==n?n:"undefined"})}},[t.contentType,l]),m=d||!(null==s?void 0:s.artifacts)||s.artifacts.length<2;return(0,r.jsxs)(D.h_,{onOpenChange:f,children:[(0,r.jsx)(D.$F,{asChild:!0,disabled:m,children:(0,r.jsx)(i.g$,{variant:"ghost",size:"icon",className:(0,L.cn)("rounded-full",m?"opacity-50":void 0),tooltipContent:(0,r.jsx)("p",{children:c("Version History")}),"aria-label":c("Version History"),tooltipProps:{delayDuration:300},children:(0,r.jsx)(z.Z,{strokeWidth:2,size:18})})}),(0,r.jsx)(D.AW,{side:"bottom",align:"end",sideOffset:6,className:"min-w-36 space-y-0.5",children:p.map((e,t)=>{var i,l;let s;if(e.createTime){let t=Date.parse(e.createTime);s=(0,B.U)(t,Date.now(),{locale:F.Z.language})}let d=(null==a?void 0:a.type)==="artifact"&&e.artifact.id===(null==a?void 0:null===(i=a.data)||void 0===i?void 0:i.artifact.id)&&e.artifact.versionId===(null==a?void 0:null===(l=a.data)||void 0===l?void 0:l.artifact.versionId);return(0,r.jsxs)(D.Xi,{onClick:()=>{o({type:"artifact",data:{artifact:e.artifact,readOnly:n}});let t=document.getElementById("artifact_card_".concat(e.artifact.versionId));t&&t.scrollIntoView({behavior:"smooth",block:"center"})},className:(0,L.cn)("flex flex-col items-start px-3 py-2",d?"bg-toggle-hover":void 0),children:[(0,r.jsx)("div",{className:"font-medium text-sm",children:c("artifact.version.number",{version_number:p.length-t})}),s?(0,r.jsx)("div",{className:"text-xs text-secondary",children:s}):void 0]},"version_".concat(t))})})]})};function O(e){let{artifact:t,contentButtons:n,readOnly:w,standalone:_}=e,{t:j}=(0,x.$G)("chat"),{client:E}=(0,u.useStatsigClient)(),A=(0,C.G)(t),{refresh:S,mode:N}=(0,d.nf)(),D=(0,l.g)(),[F,L]=(0,h.useState)(!1),[B,z]=(0,h.useState)(!1),M=(0,h.useRef)(),{mutate:H}=(0,p.Db)({mutationFn:()=>s.xU.chatShareArtifact({conversationId:t.conversationId,body:{responseId:t.responseId}})}),O=(0,h.useCallback)(e=>{y.Am.error("Failed to share artifact"),e&&c.Tb(e)},[]),W=(0,h.useCallback)(async()=>{var e;E.logEvent("artifact_publish_click",void 0,{contentType:null!==(e=t.contentType)&&void 0!==e?e:"undefined"});let n=async()=>new Promise((e,t)=>{H(void 0,{onSuccess:n=>{if(!n.sharedArtifactId)return O(Error("Could't find sharedArtifactId")),t();e("".concat(window.location.origin,"/artifact/").concat(n.sharedArtifactId))},onError:e=>{O(e),t()}})});try{let e=await n(),t=new ClipboardItem({"text/plain":new Blob([e],{type:"text/plain"})});navigator.clipboard.write([t]).then(()=>{y.Am.success(j("Copied public artifact link to clipboard.")),z(!0),setTimeout(()=>z(!1),1e3)}).catch(e=>y.Am.error(e.message))}catch(e){O(e)}},[]),Z=!D.DISABLE_PYTHON_ARTIFACTS,$="text/html"===t.contentType||Z&&(0,b.qy)(t)||Z&&(0,b.L2)(t),G=(0,h.useCallback)(async()=>{var e;E.logEvent("artifact_copy_click",void 0,{contentType:null!==(e=t.contentType)&&void 0!==e?e:"undefined"}),A&&("text/markdown"===t.contentType?await I(A):await navigator.clipboard.writeText(A),L(!0),M.current&&(clearTimeout(M.current),M.current=void 0),M.current=setTimeout(()=>L(!1),2e3))},[A,t.contentType,E]),V=(0,k.g)(t,null!=A?A:""),X=(0,h.useCallback)(()=>{var e,n;if(E.logEvent("artifact_download_click",void 0,{contentType:null!==(e=t.contentType)&&void 0!==e?e:"undefined"}),A){let e=t.contentType||"plain/text",r=v.extension(e)||U[e]||"txt",o=(null===(n=t.title)||void 0===n?void 0:n.replace(/\.[^/.]+$/,""))||t.id||"".concat(Date.now().toString()),i=new Blob([("text/html"===e?V:"")+A],{type:e}),a=window.URL.createObjectURL(i),l=document.createElement("a");l.href=a,l.download="".concat(o,".").concat(r),document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(a)}},[V,t.title,A,t.contentType,t.id,E]);return t.id?(0,r.jsxs)("div",{className:"flex w-full justify-between items-center mr-2",children:[null!=n?n:null,$?(0,r.jsx)("div",{className:"pr-4",children:(0,r.jsx)(T,{artifact:t})}):null,(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[$&&"preview"===N?(0,r.jsxs)(a.u,{delayDuration:300,children:[(0,r.jsx)(a.aJ,{asChild:!0,children:(0,r.jsx)(i.zx,{variant:"ghost",size:"icon",className:"rounded-full",onClick:S,"aria-label":j("Refresh"),children:(0,r.jsx)(o.Iy,{...P})})}),(0,r.jsx)(a._v,{children:(0,r.jsx)("p",{children:j("Refresh")})})]}):null,(0,r.jsx)(R,{artifact:t,readOnly:w}),(0,r.jsxs)(a.u,{delayDuration:300,children:[(0,r.jsx)(a.aJ,{asChild:!0,children:(0,r.jsx)(i.zx,{variant:"ghost",size:"icon",className:"rounded-full",onClick:G,"aria-label":j("Copy Contents"),children:F?(0,r.jsx)(f.Z,{...P}):(0,r.jsx)(m.Z,{...P,size:16})})}),(0,r.jsx)(a._v,{children:(0,r.jsx)("p",{children:j("Copy Contents")})})]}),(0,r.jsxs)(a.u,{delayDuration:300,children:[(0,r.jsx)(a.aJ,{asChild:!0,children:(0,r.jsx)(i.zx,{variant:"ghost",size:"icon",className:"rounded-full",onClick:X,"aria-label":j("Download to file"),children:(0,r.jsx)(o._8,{...P,size:20})})}),(0,r.jsx)(a._v,{children:(0,r.jsx)("p",{children:j("Download to file")})})]}),!_&&D.SHOW_ARTIFACTS_SHARE_BUTTON?(0,r.jsxs)(a.u,{delayDuration:300,children:[(0,r.jsx)(a.aJ,{asChild:!0,children:(0,r.jsx)(i.zx,{variant:"ghost",size:"icon",className:"rounded-full",onClick:W,"aria-label":j("Publish artifact"),children:(0,r.jsx)(g.Z,{...P})})}),(0,r.jsx)(a._v,{children:(0,r.jsx)("p",{children:B?j("Copied public link!"):j("Publish artifact")})})]}):null]})]}):null}let P={size:18,strokeWidth:2},U={"text/python":"py","text/go":"go","text/rust":"rs","text/javascript":"js","text/typescript":"ts","text/jsx":"js","text/tsx":"ts","text/cpp":"cpp","text/java":"java"}},54173:function(e,t,n){n.d(t,{g:function(){return y}});var r=n(76038),o=n(78394),i=n(49810),a=n(3189),l=n(73197),s=n(56672),d=n(4694),c=n(98437).lW;let u=[],p="officedocument.spreadsheetml",f=e=>{let[t,n]=(0,d.useState)({}),r=(0,l.CI)(e=>e.byConversationId)[e]||u,i=(0,a.a)(s.Z("fetchGetAsset"));return(0,d.useEffect)(()=>{let e=new Set;r.forEach(t=>{(t.fileAttachments||[]).forEach(t=>e.add(t))}),e.forEach(e=>{e in t||i({assetId:e}).then(t=>{n(n=>({...n,[e]:(0,o.I)(t)}))}).catch(()=>{console.error("Error fetching asset metadata",e)})})},[i,r,t,e]),t},m=e=>{let t=f(e),n=(0,l.CI)(e=>e.byConversationId)[e]||u,r=(0,d.useRef)([]);return(0,d.useMemo)(()=>{let e=n.flatMap(e=>(e.fileAttachments||[]).map(e=>t[e]).filter(Boolean));return e.length===r.current.length&&e.every((e,t)=>e===r.current[t])?r.current:(r.current=e,e)},[n,t])},g=/loadFileData\((['"])([^'"]+)\1\)/g,v=[],h=e=>{let t=(0,d.useRef)(v);return(0,d.useMemo)(()=>{if(!e)return t.current=v,v;let n=[...e.matchAll(g)].map(e=>e[2]),r=t.current;return n.length===r.length&&n.every((e,t)=>e===r[t])?r:(t.current=n,n)},[e])},x=(e,t)=>{let[n,r]=(0,d.useState)({}),[o,a]=(0,d.useState)(!1),[l,s]=(0,d.useState)(!1),u=(0,d.useMemo)(()=>e.map(e=>({url:(0,i.Vh)(t,e.fileUri),fileName:e.fileName,fileMimeType:e.fileMimeType})),[e,t]);return(0,d.useEffect)(()=>{let e=async()=>{a(!0),s(!1);try{let e=u.map(async e=>{let{url:t,fileName:n,fileMimeType:r}=e,o=await fetch(null!=t?t:"",{method:"GET",credentials:"include"});if((null==n?void 0:n.endsWith(".xlsx"))||(null==r?void 0:r.includes(p))){let e=await o.arrayBuffer(),t=c.from(e).toString("base64");return[n,t]}let i=await o.text();return[n,i]}),t=await Promise.all(e);r(Object.fromEntries(t))}catch(e){console.error(e),s(!0)}finally{a(!1)}};u.length>0&&setTimeout(e,0)},[u]),{fileData:n,loading:o,error:l}};function y(e,t){let n=!e.incomplete&&"text/html"===e.contentType,o=h(n&&null!=t?t:""),i=m(n?e.conversationId:""),a=(0,d.useMemo)(()=>i.filter(e=>{var t;return o.includes(null!==(t=null==e?void 0:e.fileName)&&void 0!==t?t:"")}),[i,o]),{ASSET_SERVER_URL:l}=(0,r.O)(),{fileData:s}=x(a,l),[c,u]=(0,d.useMemo)(()=>{let e=!1,t=a.reduce((t,n)=>{var r,o,i;let a=(null==n?void 0:null===(r=n.fileMimeType)||void 0===r?void 0:r.includes(p))||(null==n?void 0:null===(o=n.fileName)||void 0===o?void 0:o.endsWith(".xlsx"));return t[null!==(i=null==n?void 0:n.fileName)&&void 0!==i?i:""]=a,e=e||a,t},{});return[e,JSON.stringify(t)]},[a]);return(0,d.useMemo)(()=>{let e=JSON.stringify(s);return(c?'<script type="text/javascript" src="https://cdn.sheetjs.com/xlsx-0.20.3/package/dist/xlsx.full.min.js"></script>':"")+'<script type="text/javascript">\n        var gk_isXlsx = '.concat(c,";\n        var gk_xlsxFileLookup = ").concat(u,";\n        var gk_fileData = ").concat(e,";\n        function loadFileData(filename) {\n        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {\n            try {\n                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });\n                var firstSheetName = workbook.SheetNames[0];\n                var worksheet = workbook.Sheets[firstSheetName];\n\n                // Convert sheet to JSON to filter blank rows\n                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });\n                // Filter out blank rows (rows where all cells are empty, null, or undefined)\n                var filteredData = jsonData.filter(row =>\n                    row.some(cell => cell !== '' && cell !== null && cell !== undefined)\n                );\n\n                // Convert filtered JSON back to CSV\n                var csv = XLSX.utils.aoa_to_sheet(filteredData); // Create a new sheet from filtered array of arrays\n                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });\n                return csv;\n            } catch (e) {\n                console.error(e);\n                return \"\";\n            }\n        }\n        return gk_fileData[filename] || \"\";\n        }\n        </script>")},[s,c,u])}},37305:function(e,t,n){n.d(t,{G:function(){return s}});var r=n(64327),o=n(4694),i=n(28116),a=n(5893),l=n(42895);let s=e=>{let{versions:t}=(0,l.g)(e),{content:n}=(0,a.K)({artifact:e}),{edits:s}=(0,r.N)(),d=(0,o.useMemo)(()=>{var n,r,o;if(!e||!e.id||!e.versionId)return;let a=null===(n=s[e.id])||void 0===n?void 0:n[e.versionId];if(a)return a.content;if(!t)return e.content;let l=(null!==(r=null==t?void 0:t.artifacts)&&void 0!==r?r:[]).sort((e,t)=>{var n,r;return Date.parse(null!==(n=e.createTime)&&void 0!==n?n:"")-Date.parse(null!==(r=t.createTime)&&void 0!==r?r:"")}).findLast(t=>t.artifactId===e.id&&t.artifactVersionId===e.versionId);if(!l)return e.content;let{content:d}=(0,i.u)(null!==(o=l.fullArtifact)&&void 0!==o?o:"");return"string"!=typeof d?e.content:d},[t,e.id,e.versionId,e.content,s]);return(null==e?void 0:e.incomplete)?d:null!=n?n:d}},5893:function(e,t,n){n.d(t,{K:function(){return l},O:function(){return s}});var r=n(71636),o=n(53429),i=n(64327),a=n(4694);let l=e=>{var t,n,l,d,c;let u;let{artifact:p,isAllowSaving:f=!1}=e,m=(0,a.useRef)(void 0),{edits:g,saveEdit:v}=(0,i.N)(),h=(0,a.useCallback)((e,t)=>{(null==e?void 0:e.id)&&(null==e?void 0:e.versionId)&&v(e.id,e.versionId,null!=t?t:"")},[v]);(null==p?void 0:p.id)&&(null==p?void 0:p.versionId)&&(m.current=null!==(l=null===(n=g[null==p?void 0:p.id])||void 0===n?void 0:null===(t=n[null==p?void 0:p.versionId])||void 0===t?void 0:t.content)&&void 0!==l?l:p.content),(null==p?void 0:p.id)&&(null==p?void 0:p.versionId)&&(u=null===(c=g[null==p?void 0:p.id])||void 0===c?void 0:null===(d=c[null==p?void 0:p.versionId])||void 0===d?void 0:d.content);let x=(0,a.useMemo)(()=>[null==p?void 0:p.id,null==p?void 0:p.versionId],[null==p?void 0:p.id,null==p?void 0:p.versionId]),y=(0,r.N)(u,1e3,x);return(0,a.useEffect)(()=>{if(p&&f&&p.id&&p.title&&p.versionId&&!p.incomplete&&void 0!==y){var e;let t=s({id:p.id,versionId:p.versionId,text:y,contentType:null!==(e=p.contentType)&&void 0!==e?e:"text/plain",title:p.title});(0,o.i4)(p.id,p.versionId,t)}},[y]),{content:m.current,onTextUpdate:h}},s=e=>{let{text:t,id:n,versionId:r,contentType:o,title:i}=e,a=t.replaceAll("xaiArtifact","xai\xadArtifact");return'<xaiArtifact artifact_id="'.concat(n,'" artifact_version_id="').concat(r,'" title="').concat(i,'" contentType="').concat(o,'">').concat(a,"</xaiArtifact>")}},42895:function(e,t,n){n.d(t,{g:function(){return a}});var r=n(53429),o=n(98145),i=n(4694);let a=e=>{var t;let n=(0,i.useRef)(null==e?void 0:e.incomplete);(0,i.useEffect)(()=>{n.current=null==e?void 0:e.incomplete},[null==e?void 0:e.id,null==e?void 0:e.versionId]);let{data:a,refetch:l,isError:s,isLoading:d}=(0,o.aM)({queryKey:["artifact_versions",null==e?void 0:e.id],enabled:!(null===(t=null==e?void 0:e.incomplete)||void 0===t||t),queryFn:async()=>{if((null==e?void 0:e.id)&&e.conversationId)return(0,r.$7)(e.id,e.conversationId)}});return(0,i.useEffect)(()=>{!0===n.current&&(null==e?void 0:e.incomplete)===!1&&setTimeout(()=>{l()},1e3)},[null==e?void 0:e.incomplete]),{versions:a,refetch:l,isLoading:d,isError:s}}},53429:function(e,t,n){n.d(t,{$7:function(){return i},S3:function(){return l},i4:function(){return a}});var r=n(69735),o=n(53952);async function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.xU;return await n.chatGetArtifactById({artifactId:e,body:{conversationId:t}})}async function a(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.xU;try{if((await i.chatUpdateArtifact({artifactId:e,body:{artifactVersionId:t,fullArtifact:n}})).artifactVersionId)return!0}catch(e){return o.Tb(e),!1}}async function l(e){let{artifactId:t,artifactVersionId:n,isInline:i}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.xU;try{if((await a.chatUpdateArtifactInlineStatus({artifactId:t,body:{artifactVersionId:n,inlineStatus:i?"SHOW_INLINE_ARTIFACT_INLINE_STATUS":"SHOW_SIDEBAR_ARTIFACT_INLINE_STATUS"}})).artifactVersionId)return!0}catch(e){return o.Tb(e),!1}}},64327:function(e,t,n){n.d(t,{N:function(){return d},dV:function(){return s},nf:function(){return l}});var r=n(30722),o=n.n(r),i=n(11194),a=n(85035);let l=(0,i.U)(e=>({mode:"code",setMode:t=>e({mode:t}),artifactsByConversationId:{},isRefreshing:!1,refresh:()=>{e({isRefreshing:!0}),setTimeout(()=>e({isRefreshing:!1}),100)},upsertArtifact:(t,n)=>{t.id&&t.timestamp&&e(e=>{var r,i,a;return{artifactsByConversationId:{...e.artifactsByConversationId,[n]:{...null!==(i=e.artifactsByConversationId[n])&&void 0!==i?i:{},[t.id]:o().orderBy(o().uniqBy([t,...null!==(a=null===(r=e.artifactsByConversationId[n])||void 0===r?void 0:r[t.id])&&void 0!==a?a:[]],"identifier"),"timestamp","asc")}}}})}})),s=(0,i.U)()((0,a.tJ)(e=>({inlineSettings:{},setInlineSetting:(t,n)=>{e(e=>({inlineSettings:{...e.inlineSettings,[t]:{updateTime:Date.now(),isInline:n}}}))}}),{name:"inline-artifacts"})),d=(0,i.U)()((0,a.tJ)(e=>({edits:{},saveEdit:(t,n,r)=>{e(e=>{var o,i,a,l;let s=null!==(a=null===(i=e.edits[t])||void 0===i?void 0:null===(o=i[n])||void 0===o?void 0:o.lastSyncTime)&&void 0!==a?a:0,d={editTime:Date.now(),lastSyncTime:s,content:r};return{edits:{...e.edits,[t]:{...null!==(l=e.edits[t])&&void 0!==l?l:{},[n]:d}}}})},updateLastSyncTime:(t,n)=>{e(e=>{var r,o;let i=null===(r=e.edits[t])||void 0===r?void 0:r[n];if(!i)return{};let a={...i,lastSynctime:Date.now()};return{edits:{...e.edits,[t]:{...null!==(o=e.edits[t])&&void 0!==o?o:{},[n]:a}}}})}}),{name:"artifacts-edits"}))}}]);
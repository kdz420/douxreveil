!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="3cecaacc-fa53-4c56-9bcf-2bf3afd71046",e._sentryDebugIdIdentifier="sentry-dbid-3cecaacc-fa53-4c56-9bcf-2bf3afd71046")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{86986:function(e,t,s){Promise.resolve().then(s.t.bind(s,30745,23)),Promise.resolve().then(s.bind(s,1162)),Promise.resolve().then(s.bind(s,76038)),Promise.resolve().then(s.bind(s,9593)),Promise.resolve().then(s.bind(s,87005)),Promise.resolve().then(s.bind(s,99595)),Promise.resolve().then(s.bind(s,2043)),Promise.resolve().then(s.bind(s,88669)),Promise.resolve().then(s.bind(s,69735)),Promise.resolve().then(s.bind(s,10190)),Promise.resolve().then(s.bind(s,97257)),Promise.resolve().then(s.bind(s,87881)),Promise.resolve().then(s.bind(s,38198)),Promise.resolve().then(s.bind(s,70169)),Promise.resolve().then(s.bind(s,41695)),Promise.resolve().then(s.bind(s,36043)),Promise.resolve().then(s.bind(s,82887)),Promise.resolve().then(s.bind(s,29536)),Promise.resolve().then(s.bind(s,91487)),Promise.resolve().then(s.bind(s,5273)),Promise.resolve().then(s.bind(s,87353)),Promise.resolve().then(s.bind(s,72467)),Promise.resolve().then(s.bind(s,96888)),Promise.resolve().then(s.bind(s,46346)),Promise.resolve().then(s.bind(s,69019)),Promise.resolve().then(s.bind(s,3810)),Promise.resolve().then(s.bind(s,40881)),Promise.resolve().then(s.t.bind(s,61370,23)),Promise.resolve().then(s.t.bind(s,87064,23)),Promise.resolve().then(s.t.bind(s,78982,23)),Promise.resolve().then(s.t.bind(s,13803,23)),Promise.resolve().then(s.bind(s,62312)),Promise.resolve().then(s.bind(s,34164)),Promise.resolve().then(s.bind(s,46458)),Promise.resolve().then(s.bind(s,34646))},1162:function(e,t,s){"use strict";s.d(t,{Loadout:function(){return e6}});var n=s(2899);s(17010);var i=s(40202),a=s(34116),r=s(81211),l=s(72242),o=s(60193),c=s(4886),d=s(65671),u=s(41916),m=s(4694),x=s(6240),h=s(54596);function f(){let e=(0,r.g)(),t=(0,m.useMemo)(()=>{let t=p.safeParse(e.BANNER.value);if(t.success)return t.data},[e.BANNER.value]),[s,i]=(0,x.Z)("banner-".concat(null==t?void 0:t.sentAt),!1),h=(0,m.useMemo)(()=>{if(t)switch(t.type){case"log":return(0,n.jsx)(o.Z,{className:"mr-0.5",size:18});case"warn":return(0,n.jsx)(c.Z,{className:"mr-0.5",size:18});case"error":return(0,n.jsx)(d.Z,{className:"mr-0.5",size:18})}},[null==t?void 0:t.type]),f=(0,m.useCallback)(()=>{i(!0)},[]);if(!s&&t&&t.message)return(0,n.jsxs)("div",{className:(0,l.cn)("absolute top-4 right-1/2 translate-x-1/2 z-50","flex flex-row items-center gap-3","bg-popover rounded-2xl ring-1 ring-inset ring-toggle-border","mx-4 py-3 pl-4 pr-3 min-w-[300px] max-w-full lg:max-w-3/5 w-fit"),children:[h,t.message,(0,n.jsx)(a.zx,{className:"ml-auto",variant:"ghostSecondary",size:"iconSm",onClick:f,children:(0,n.jsx)(u.Z,{size:18})})]})}let p=h.z.object({sentAt:h.z.string().catch(new Date().toISOString()),type:h.z.union([h.z.literal("log"),h.z.literal("warn"),h.z.literal("error")]).catch("error"),message:h.z.string().catch("")}).catch({sentAt:new Date().toISOString(),type:"log",message:""});var v=s(87005),g=s(95951),b=s(74542),y=s(75361);let j=()=>{let[e,t]=(0,x.Z)("anonUserId"),[s,n]=(0,x.Z)("anonPrivateKey"),{user:i,anonUser:a,refreshAnonUser:r}=(0,v.useSession)(),l=(0,m.useCallback)(async()=>{let{privateKey:e,anonUserId:s}=await (0,g.b)();t(s),n(e),await r(s,e)},[]);return(0,m.useEffect)(()=>{let t=async()=>{e&&s?await r(e,s).catch(()=>l()):await l()};i||e&&s&&a||t().catch(e=>{y.Am.error("Failed to initialize session"),(0,b.H)("session-store-init",e)})},[e,s]),null};var w=s(5419);let N=w.fC;w.xz;let S=w.h_,E=m.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,n.jsx)(w.aV,{className:(0,l.cn)("fixed inset-0 z-50 bg-overlay data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...i,ref:t})});E.displayName=w.aV.displayName;let k=m.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,n.jsxs)(S,{children:[(0,n.jsx)(E,{}),(0,n.jsx)(w.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 ring-1 ring-inset ring-popover-border bg-popover p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-3xl",s),...i})]})});k.displayName=w.VY.displayName;let P=e=>{let{className:t,...s}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};P.displayName="AlertDialogHeader";let C=e=>{let{className:t,...s}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};C.displayName="AlertDialogFooter";let I=m.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,n.jsx)(w.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold",s),...i})});I.displayName=w.Dx.displayName;let _=m.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,n.jsx)(w.dk,{ref:t,className:(0,l.cn)("text-sm text-secondary",s),...i})});_.displayName=w.dk.displayName;let z=m.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,n.jsx)(w.aU,{ref:t,className:(0,l.cn)((0,a.dc)({variant:"primary"}),s),...i})});z.displayName=w.aU.displayName;let R=m.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,n.jsx)(w.$j,{ref:t,className:(0,l.cn)((0,a.dc)({variant:"ghost"}),"mt-2 sm:mt-0",s),...i})});R.displayName=w.$j.displayName;var M=s(48972),O=s(8781),U=s(70702);function T(e){let{startTimeMs:t,onComplete:s}=e,i=(0,m.useRef)(null),a=(0,m.useRef)();return(0,m.useEffect)(()=>{if(!i.current)return;let e=e=>{i.current&&(i.current.textContent=(e/1e3).toString())};e(t);let n=t,r=setInterval(()=>{if((n-=1e3)<0){clearInterval(r),null==s||s();return}e(n)},1e3);return a.current=()=>clearInterval(r),()=>{var e;return null===(e=a.current)||void 0===e?void 0:e.call(a)}},[t,s]),(0,n.jsx)("span",{ref:i})}let Z={title:"Are you still there?",reset:"Reset my chats",confirm:"I'm still here"};function L(){let{t:e}=(0,U.$G)("base"),[t,s]=function(e){let{timeToWarningMs:t,gracePeriodMs:s}=e,[n,i]=(0,m.useState)("active"),[a,r]=(0,m.useState)(!0),l=(0,m.useCallback)(()=>{i("active"),r(!0)},[]);return(0,m.useEffect)(()=>{let e,n;let o=()=>{a&&(clearTimeout(e),clearTimeout(n),l(),e=setTimeout(()=>{i("warning"),r(!1)},t))},c=["mousedown","mousemove","keypress","scroll","touchstart"];return a?(c.forEach(e=>{document.addEventListener(e,o,!0)}),e=setTimeout(()=>{i("warning"),r(!1)},t)):n=setTimeout(()=>{i("inactive")},s),()=>{a?(c.forEach(e=>{document.removeEventListener(e,o,!0)}),clearTimeout(e)):clearTimeout(n)}},[t,s,l,a]),[n,l]}({timeToWarningMs:3e5,gracePeriodMs:6e4}),i=(0,v.useSession)(),r=(0,m.useCallback)(()=>{i.clearUser(),window.location.reload(),localStorage.clear(),function(){for(let e of document.cookie.split(";")){let t=e.indexOf("="),s=t>-1?e.substr(0,t):e;document.cookie=s+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/"}}()},[i]);(0,m.useEffect)(()=>{"inactive"===t&&r()},[t]);let l=(0,m.useCallback)(()=>{s()},[]),o=(0,O.w)();if("active"===t)return null;let c=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U.cC,{i18nKey:"Your chats will be deleted after",components:{timer:(0,n.jsx)("span",{className:"text-sunset",children:(0,n.jsx)(T,{startTimeMs:6e4})})},values:{minutes:Math.ceil(5)}}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)(U.cC,{i18nKeys:"To permanently save",children:["To permanently save your chats you must ",(0,n.jsx)("b",{children:"sign in"}),"."]})]});return o?(0,n.jsx)(M.dy,{dismissible:!1,open:"warning"===t,children:(0,n.jsxs)(M.sc,{children:[(0,n.jsx)(M.OX,{children:(0,n.jsx)(M.iI,{children:e(Z.title)})}),(0,n.jsx)("div",{className:"p-4 text-primary",children:c()}),(0,n.jsxs)(M.ze,{children:[(0,n.jsx)(a.zx,{variant:"ghost",onClick:r,children:e(Z.reset)}),(0,n.jsx)(a.zx,{onClick:l,variant:"primary",children:e(Z.confirm)})]})]})}):(0,n.jsx)(N,{open:"warning"===t,children:(0,n.jsxs)(k,{children:[(0,n.jsxs)(P,{children:[(0,n.jsx)(I,{children:e(Z.title)}),(0,n.jsx)(_,{className:"text-primary",children:c()})]}),(0,n.jsxs)(C,{children:[(0,n.jsx)(R,{onClick:r,children:e(Z.reset)}),(0,n.jsx)(z,{onClick:l,children:e(Z.confirm)})]})]})})}var D=s(94408),A=s(76256),G=s(34820),F=s(89463),W=s(86983);let $=()=>{let[e,t]=(0,m.useState)(!0);return(0,m.useEffect)(()=>{let e=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",e),window.addEventListener("offline",s),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",s)}},[]),e};var X=s(99595),Y=s(30722),H=s.n(Y),B=s(13771),V=s(68192),K=s(64846),q=s(43701),J=s(14075),Q=s(56672),ee=s(13717),et=s(76010),es=s(14714),en=s(40955),ei=s(42210),ea=s(35813),er=s(74239),el=s(11194),eo=s(85035),ec=s(76038),ed=s(43335);let eu=(0,el.U)()((0,eo.tJ)(e=>({isDismissed:!1,setIsDismissed:t=>e({isDismissed:t})}),{name:"open-in-app-dialog"}));function em(){let{t:e}=(0,U.$G)("base"),t=(0,r.g)(),{client:s}=(0,er.useStatsigClient)(),i=eu(Q.Z("isDismissed")),o=eu(Q.Z("setIsDismissed")),{os:c}=(0,ea.i)(),{APP_STORE_URL:d,GOOGLE_PLAY_URL:u}=(0,ec.O)(),[x,h]=(0,m.useState)(!!t.SHOW_OPEN_IN_APP_DIALOG_EVERY_TIME||!i),f=(0,m.useCallback)(()=>{if(s.logEvent("clicked_open_in_app",c,{location:"open-in-app-dialog"}),!t.SHOW_OPEN_IN_APP_DIALOG_DOWNLOAD_DEFAULT){let e=document.createElement("iframe");e.src=window.location.href,e.style.display="none",e.height="0",e.width="0",document.body.appendChild(e)}setTimeout(function(){document.hasFocus()&&(s.logEvent("redirected_to_store",c,{location:"open-in-app-dialog"}),"ios"===c?window.location.href=d:window.location.href=u)},500)},[s,c,d,u,t]),p=(0,m.useCallback)(()=>{s.logEvent("clicked_open_in_app_not_now",c,{location:"open-in-app-dialog"}),o(!0),h(!1)},[o,h,s,c]);return(0,n.jsxs)(ei.c,{open:x,setOpen:h,contentClassName:(0,l.cn)("focus:outline-0 focus-within:outline-0 gap-2","bg-background rounded-3xl","w-full md:w-5/6 lg:w-3/5 max-w-sm","flex flex-col","md:overflow-hidden","px-6 py-6"),children:[(0,n.jsx)("div",{className:"w-full flex justify-center pt-4",children:(0,n.jsx)(ed.$I,{className:"w-32 h-14"})}),(0,n.jsx)(en.fK,{className:"mb-2 sm:text-center",children:(0,n.jsx)(en.Be,{className:"mb-1",children:e("Get the full Grok experience")})}),(0,n.jsx)(a.zx,{asChild:!0,variant:"primary",size:"lg",onClick:f,children:(0,n.jsx)("div",{children:e(t.SHOW_OPEN_IN_APP_DIALOG_DOWNLOAD_DEFAULT?"Download App":"Open in App")})}),(0,n.jsx)(a.zx,{asChild:!0,variant:"secondary",size:"lg",onClick:p,children:(0,n.jsx)("div",{children:e("Not now")})})]})}s(73020),new WeakSet;var ex=s(68060),eh=s(40794),ef=s(81556),ep=s(75260),ev=s(51139),eg=s(44093);function eb(e){let{children:t,isVisible:s,minWidth:i,maxWidth:a,initialWidth:r,className:o}=e,[c,d]=(0,m.useState)(!1),[u,x]=(0,m.useState)(r);(0,m.useRef)(u).current=u;let h=(0,m.useRef)(null),f=(0,m.useRef)(document.body.clientWidth);(0,m.useEffect)(()=>{x(r)},[r]);let p=(0,m.useCallback)(e=>{e.preventDefault(),d(!0)},[]),v=(0,m.useCallback)(()=>{d(!1)},[]),g=(0,m.useCallback)(e=>{c&&h.current&&x(Math.max(i,Math.min(a,document.body.clientWidth-e.clientX)))},[c,i,a]),b=(0,m.useCallback)(()=>{x(Math.max(i,Math.min(a,r/f.current*document.body.clientWidth)))},[i,a,r]);return(0,m.useEffect)(()=>(window.addEventListener("mousemove",g),()=>window.removeEventListener("mousemove",g)),[g]),(0,m.useEffect)(()=>(window.addEventListener("mouseup",v),()=>window.removeEventListener("mouseup",v)),[v]),(0,m.useEffect)(()=>(window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)),[b]),(0,n.jsx)(ev.M,{children:s&&(0,n.jsx)(eg.E.div,{initial:{x:u,opacity:0,width:0},animate:{x:0,opacity:1,width:u},exit:{x:u,opacity:0,width:0},transition:c?{duration:0}:{type:"ease",ease:"easeInOut",duration:.2},className:(0,l.cn)("h-dvh flex-shrink-0",o),children:(0,n.jsxs)("div",{ref:h,className:"relative h-full w-full",children:[(0,n.jsx)("div",{className:(0,l.cn)("absolute start-0 top-0 bottom-0 w-2 cursor-col-resize border-l border-input-border hover:bg-card-hover z-50",c&&"bg-card-hover"),onMouseDown:p}),(0,n.jsxs)("div",{className:"h-full p-0",children:[t,c&&(0,n.jsx)("div",{className:"absolute inset-0 bg-transparent z-50"})]})]})})})}var ey=s(63255),ej=s(6936),ew=s(43010),eN=s(63994),eS=s(9682),eE=s(38199),ek=s(49810),eP=s(89194),eC=s(98145),eI=s(86952),e_=s(8728),ez=s(65215),eR=s(84444),eM=s(40881),eO=s(41543),eU=s(12340),eT=s(80779),eZ=s(2368);function eL(e){let{fileMetadata:t,onClose:s,useRawFileURI:i,hideEdit:a}=e,{t:r}=(0,U.$G)("chat"),{ASSET_SERVER_URL:l}=(0,ec.O)(),{data:o,isLoading:c,error:d}=(0,eC.aM)({queryKey:["asset",t.fileMetadataId],queryFn:async()=>i?t.fileUri:(0,ek.Vh)(l,t.fileUri)});if(c)return(0,n.jsxs)("div",{className:"p-4",children:[r("Loading"),"..."]});if(d)return(0,n.jsx)("div",{className:"p-4",children:r("Error: Could not access this content")});if(t.fileMimeType.startsWith("text/"))return(0,n.jsx)(eG,{assetUrl:o,fileMetadata:t});switch(t.fileMimeType){case"image/jpeg":case"image/png":case"image/webp":return(0,n.jsx)(eD,{assetUrl:o,fileMetadata:t,onClose:s,hideEdit:a});case"application/json":case"application/csv":case"application/x-yaml":case"application/xml":case"application/toml":case"":return(0,n.jsx)(eG,{assetUrl:o,fileMetadata:t});case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return(0,n.jsx)(eF,{assetUrl:o,fileMetadata:t});default:return(0,n.jsx)(eW,{assetUrl:o,fileMetadata:t})}}function eD(e){let{assetUrl:t,fileMetadata:s,showControls:i=!1,onClose:l,hideEdit:o}=e,[c,d]=(0,m.useState)(!0),u=(0,r.g)(),{t:x}=(0,U.$G)("chat");(0,m.useEffect)(()=>{if(!t){d(!1);return}let e=new Image;return e.src=t,e.onload=()=>d(!1),e.onerror=()=>d(!1),()=>{e.onload=null,e.onerror=null}},[t]);let h=(0,m.useCallback)(()=>{t&&(0,eP.G)(t,s.fileName).catch((0,b.n4)("chat-asset-viewer:handleDownloadImage"))},[t,s]);return i?(0,n.jsx)("div",{className:"flex flex-col items-center justify-center w-full max-w-4xl mx-auto","data-vaul-no-drag":!0,children:(0,n.jsx)("div",{className:"relative w-full max-w-4xl mx-auto",children:(0,n.jsx)(eZ.d$,{initialScale:1,initialPositionX:0,initialPositionY:0,children:e=>{let{zoomIn:i,zoomOut:r,resetTransform:l}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"absolute end-4 bottom-4 z-10 flex space-x-1 rounded-full bg-background p-1 opacity-80",children:[(0,n.jsx)(a.zx,{onClick:()=>i(),variant:"ghost",size:"iconSm",className:"text-primary hover:bg-foreground","aria-label":"Zoom In",children:(0,n.jsx)(eI.Z,{className:"h-4 w-4"})}),(0,n.jsx)(a.zx,{onClick:()=>r(),variant:"ghost",size:"iconSm",className:"text-primary hover:bg-foreground","aria-label":"Zoom Out",children:(0,n.jsx)(e_.Z,{className:"h-4 w-4"})}),(0,n.jsx)(a.zx,{onClick:()=>l(),variant:"ghost",size:"iconSm",className:"text-primary hover:bg-foreground","aria-label":"Reset Zoom",children:(0,n.jsx)(ez.Z,{className:"h-4 w-4"})}),(0,n.jsx)(a.zx,{onClick:h,variant:"ghost",size:"iconSm",className:"text-primary hover:bg-foreground","aria-label":"Reset Zoom",children:(0,n.jsx)(eR.Z,{className:"h-4 w-4"})})]}),(0,n.jsx)(eZ.Uv,{wrapperClass:"!w-full bg-primary/50 rounded-lg",children:(0,n.jsx)("img",{src:t,alt:s.fileName,className:"w-full h-auto shadow-md",onLoad:()=>r(),style:{maxHeight:"70vh"}})}),c&&(0,n.jsx)(eE.O,{className:"w-full h-[70vh] rounded-lg"})]})}})})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("img",{src:t,alt:s.fileName,className:"w-[94vw] max-h-[calc(100vh-10rem)] max-w-5xl xl:max-w-6xl shadow cursor-pointer rounded-xl lg:w-fit object-contain"}),u.SHOW_IMAGE_EDIT&&t&&!o&&(0,n.jsx)("div",{className:"w-full flex justify-center absolute bottom-3 p-3",children:(0,n.jsxs)(eS.d,{className:"px-4 py-3 h-auto",buttonProps:{variant:"card",size:"pill"},editingImage:{url:t,metadata:s},location:"chat-asset-viewer",onClick:e=>{e.stopPropagation(),l()},children:[(0,n.jsx)(eN.NP,{className:"size-5 text-secondary"}),x("Edit Image")]})})]})}let eA=["text/plain","text/csv","application/csv"];function eG(e){let{assetUrl:t,fileMetadata:s}=e,{t:i}=(0,U.$G)("chat"),{resolvedTheme:a}=(0,eM.F)(),{isLoading:r,error:l,data:o}=(0,eC.aM)({queryKey:["text-asset",t],queryFn:async()=>{if(!t)throw Error("Asset URL is required");let e=await fetch(t,{method:"GET",credentials:"include"});if(!e.ok)throw Error("Failed to fetch: ".concat(e.statusText));return await e.text()},enabled:!!t});if(r)return(0,n.jsx)("div",{className:"p-4",children:i("Loading text…")});if(l)return(0,n.jsx)("div",{className:"p-4",children:i("errorMessage",{error:l.message})});if(!o)return(0,n.jsx)("div",{className:"p-4",children:i("No text content available.")});let c=o.length>16384,d=eA.includes(s.fileMimeType),u=c||d?(0,n.jsx)("pre",{className:"w-full p-4 rounded-lg shadow-md text-sm font-mono overflow-auto max-h-[50dvh] sm:max-h-[calc(100dvh-6rem)] mb-4 bg-foreground",children:o}):(0,n.jsx)("div",{className:"w-full rounded-lg shadow-md text-sm font-mono overflow-auto max-h-[50dvh] sm:max-h-[calc(100dvh-6rem)] mb-4",children:(0,n.jsx)(eO.Z,{style:"dark"===a?eU.Z:eT.Z,customStyle:{background:"dark"===a?"#121314":"var(--foreground)",fontFamily:"var(--font-ibm-plex-mono)"},children:o})});return(0,n.jsx)("div",{className:"flex flex-col items-center justify-center w-full max-w-4xl mx-auto",children:u})}function eF(e){let{assetUrl:t,fileMetadata:s}=e,{t:i}=(0,U.$G)("chat");return t?(0,n.jsx)("div",{className:"flex flex-col items-center justify-center rounded-lg mb-4",children:(0,n.jsx)("a",{href:t,download:s.fileName||"download",children:(0,n.jsx)(a.zx,{children:i("Download Asset")})})}):null}function eW(e){let{assetUrl:t,fileMetadata:s}=e,i=(0,m.useRef)(null);return(0,m.useEffect)(()=>{let e=()=>{if(i.current){let e=window.innerWidth<O.G,t=window.innerHeight*(e?.7:.9);i.current.style.height="".concat(t,"px")}};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}},[]),(0,n.jsx)("div",{className:"flex flex-col items-center justify-center rounded-lg mb-4 w-full",children:(0,n.jsx)("iframe",{ref:i,src:t,width:"100%",height:"800px",title:s.fileName,className:"rounded-lg shadow-md"})})}var e$=s(69492),eX=s(61626),eY=s(85632),eH=s(85635);let eB=(0,el.U)(e=>({previewMode:"desktop",setPreviewMode:t=>e({previewMode:t}),isRefreshing:!1,refresh:()=>{e({isRefreshing:!0}),setTimeout(()=>e({isRefreshing:!1}),100)}}));var eV=s(97818),eK=s(26963),eq=s(71181);function eJ(){let{t:e}=(0,U.$G)("chat"),{previewMode:t,setPreviewMode:s}=eB();return(0,n.jsx)(eH.mQ,{className:"flex-1 flex-row justify-center flex",defaultValue:"desktop",value:t,onValueChange:e=>s(e),children:(0,n.jsxs)(eH.dr,{children:[(0,n.jsxs)(eH.SP,{className:"gap-1",value:"desktop",children:[(0,n.jsx)(eV.Z,{className:"size-4"}),(0,n.jsx)("span",{className:"hidden md:inline",children:e("Wide")})]}),(0,n.jsxs)(eH.SP,{className:"gap-1",value:"mobile",children:[(0,n.jsx)(eK.Z,{className:"size-4"}),(0,n.jsx)("span",{className:"hidden md:inline",children:e("Mobile")})]})]})})}function eQ(){let{refresh:e}=eB(),{t}=(0,U.$G)("chat");return(0,n.jsx)("div",{className:"flex gap-2 items-center",children:(0,n.jsxs)(D.u,{delayDuration:300,children:[(0,n.jsx)(D.aJ,{asChild:!0,children:(0,n.jsx)(a.zx,{variant:"outline",size:"icon",onClick:e,children:(0,n.jsx)(eq.Z,{size:16})})}),(0,n.jsx)(D._v,{children:(0,n.jsx)("p",{children:t("Refresh")})})]})})}function e0(e){let{html:t}=e,{previewMode:s,isRefreshing:i}=eB();return(0,n.jsx)("div",{className:"h-full bg-foreground dark:bg-background",children:(0,n.jsx)("div",{className:"w-full h-full flex flex-col",children:(0,n.jsx)("div",{className:(0,l.cn)("bg-background-secondary flex-1 flex flex-col"),children:(0,n.jsx)("div",{className:(0,l.cn)("flex-1 bg-foreground","mobile"===s&&"max-w-lg mx-auto"),children:i?null:(0,n.jsx)(eX.GJ,{srcDoc:t,autofocus:!0})})})})})}var e1=s(73197),e2=s(37330);let e4=e=>{let{responseId:t}=e,[s,i]=(0,m.useState)(""),a=(0,e1.CI)(e=>e.byId[t]);return(0,m.useEffect)(()=>{let e=setInterval(()=>{var e;i((null===(e=a.steps)||void 0===e?void 0:e.map(e=>{var t,s,n;if(!(null===(t=e.tags)||void 0===t?void 0:t.includes("assistant")))return"";let i=null===(s=e.tags)||void 0===s?void 0:s.indexOf("assistant");return(null===(n=e.text)||void 0===n?void 0:n[i])||""}).join(" "))||"")},100);return()=>clearInterval(e)},[a.steps]),(0,n.jsx)(e2._I,{sender:"assistant",webSearchResults:[],xposts:[],children:s})};function e5(){var e;let{t}=(0,U.$G)("chat"),s=(0,r.g)(),i=(0,e$.gK)(Q.Z("sidePanelContent")),o=(0,e$.gK)(Q.Z("setSidePanelContent")),[c,d]=(0,m.useState)(void 0),x=["htmlPreview","artifact"].includes(null!==(e=null==i?void 0:i.type)&&void 0!==e?e:""),h=(0,O.w)(x?1024:void 0),f=(null==i?void 0:i.type)==="thinkingTrace"?740:.62*document.body.clientWidth,p=(0,m.useCallback)(()=>{o(void 0)},[o]),v=()=>{var e,r,m,x;let f,v,g,b;if(!i)return null;let{type:y,data:j}=i,w=null,N=null;switch(y){case"asset":f=(0,n.jsx)(ew.Z,{className:"!size-5"}),v=j.fileName.length>0?j.fileName:"File",b=(0,n.jsx)("div",{className:"flex flex-col items-center gap-2 px-4 pb-2",children:(0,n.jsx)(eL,{fileMetadata:j,onClose:p,hideEdit:i.hideEdit})});break;case"rawAsset":f=(0,n.jsx)(ew.Z,{className:"!size-5"}),v=j.fileName.length>0?j.fileName:"File",b=(0,n.jsx)("div",{className:"flex flex-col items-center gap-2 px-4 pb-2",children:(0,n.jsx)(eL,{fileMetadata:j,onClose:p,useRawFileURI:!0})});break;case"webSearchResults":v=t("Search Results"),b=(0,n.jsxs)("div",{className:"flex flex-col items-center gap-2 px-4 pb-2",children:[j.webSearchResults.map(e=>(0,n.jsx)("div",{className:"w-full py-1 text-base text-primary",children:(0,n.jsx)(ef.Fg,{webSearchResult:e})},e.url)),!!(null===(e=j.browsedUrls)||void 0===e?void 0:e.length)&&(null===(r=j.browsedUrls)||void 0===r?void 0:r.length)>0&&(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("div",{className:"text-base font-medium pb-2",children:t("Deep Search: Browsed URLs")}),null===(m=j.browsedUrls)||void 0===m?void 0:m.map(e=>(0,n.jsx)("div",{className:"w-full py-1 text-base text-primary",children:(0,n.jsx)(ef.Fg,{webSearchResult:{url:e,title:e,preview:"",searchEngineText:"",description:"",siteName:"",metadataTitle:"",creator:"",image:"",favicon:"",citationId:""}})},e))]})]});break;case"xPosts":v=t("\uD835\uDD4F Posts"),b=(0,n.jsx)("div",{className:"flex flex-col items-center px-4 pb-2",children:j.map(e=>(0,n.jsx)("div",{className:"w-full py-1 text-base text-primary",children:(0,n.jsx)(ef.jW,{xPost:e})},e.postId))});break;case"memoryReferences":v=(0,n.jsxs)("div",{className:"flex flex-row items-center gap-1.5",children:[t("response-action.memory-references","Referenced Chats"),(0,n.jsx)(ey.v,{})]}),g=t("Forgetting conversations won’t delete them from history"),b=(0,n.jsx)(ep.L,{responseId:j.responseId,memoryReferences:j.memoryReferences});break;case"thinkingTrace":v=t("Thoughts"),b=(0,n.jsx)(eg.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.15},className:"[&>*:first-child]:mt-0 h-fit overflow-x-auto w-full focus:outline-none focus-within:outline-none px-3 prose dark:prose-invert",children:(0,n.jsx)(e4,{responseId:j.responseId})});break;case"artifact":v=null,b=(0,n.jsx)(eX.kw,{artifact:j.artifact,onSetMenu:s.ENABLE_ARTIFACTS_EDITING?d:void 0,readOnly:j.readOnly}),N=null,w=(0,n.jsx)(eY.z,{artifact:j.artifact,contentButtons:c,readOnly:j.readOnly});break;case"htmlPreview":w=(0,n.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,n.jsx)(eJ,{}),(0,n.jsx)(eQ,{})]}),b=(0,n.jsx)(e0,{html:j});break;default:throw Error("Unknown side panel content type")}let S=["asset","webSearchResults","xPosts","memoryReferences"].includes(null!==(x=null==i?void 0:i.type)&&void 0!==x?x:"");return(0,n.jsxs)("aside",{className:"max-h-[97dvh] h-[97dvh] lg:max-h-none lg:h-full flex flex-col w-full overflow-y-auto overflow-x-hidden bg-background-secondary",children:[(0,n.jsxs)("div",{className:(0,l.cn)("flex z-10 flex-row items-center justify-between flex-shrink-0 w-full px-2 md:px-5 sticky top-0 bg-gradient-to-b from-background-secondary via-background-secondary to-transparent",S&&"px-4",g?"h-[4.5rem] via-90%":"h-12 md:h-16 via-80%"),children:[w||(0,n.jsxs)("div",{className:"flex flex-row gap-2 items-center max-w-[80%]",children:[f&&(0,n.jsx)("div",{className:"flex-shrink-0",children:f}),(0,n.jsxs)("div",{className:(0,l.cn)("flex flex-col items-start w-full",h&&"gap-1"),children:[(0,n.jsx)("div",{className:"truncate text-base font-medium w-full",children:h?(0,n.jsx)(en.$N,{children:v}):v}),g&&(0,n.jsx)("div",{className:(0,l.cn)("text-xs text-secondary w-full",!h&&"truncate"),children:h?(0,n.jsx)(en.Be,{children:g}):g})]})]}),N,(0,n.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[null,(0,n.jsxs)(D.u,{delayDuration:300,children:[(0,n.jsx)(D.aJ,{asChild:!0,children:(0,n.jsx)(a.zx,{variant:"ghost",size:"icon",onClick:()=>o(void 0),className:"flex-shrink-0 rounded-full","aria-label":t("Close"),children:(0,n.jsx)(u.Z,{size:20,strokeWidth:2})})}),(0,n.jsx)(D._v,{children:(0,n.jsx)("p",{children:t("Close")})})]})]})]}),(0,n.jsx)("div",{className:(0,l.cn)("flex-grow w-full h-fit overflow-y-visible",(null==i?void 0:i.type)==="artifact"&&"overflow-y-auto min-h-0 flex-1 p-0"),children:b})]})};return h?(0,n.jsx)(M.dy,{open:!!i,onOpenChange:e=>o(e?i:void 0),children:(0,n.jsx)(M.sc,{className:"focus:outline-none",disableDrag:!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),children:v()})}):i&&"asset"===i.type&&i.data.fileMimeType.startsWith("image/")?(0,n.jsx)(ej.Vq,{open:!!i,onOpenChange:e=>{o(e?i:void 0)},children:(0,n.jsx)(en.PK,{children:(0,n.jsx)(en.cZ,{className:(0,l.cn)("bg-transparent h-full w-full","!scale-100 !-translate-x-1/2 !-translate-y-1/2"),children:(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-full",onClick:()=>o(void 0),children:[(0,n.jsx)(eL,{fileMetadata:i.data,onClose:p,hideEdit:i.hideEdit}),(0,n.jsx)("div",{className:"absolute flex-col justify-between hidden lg:flex end-3 inset-y-3 dark",children:(0,n.jsx)(a.zx,{variant:"ghost",size:"iconXl",onClick:e=>{e.stopPropagation(),o(void 0)},children:(0,n.jsx)(u.Z,{className:"size-5"})})})]})})})}):(0,n.jsx)(eb,{isVisible:!!i,minWidth:x&&!h?550:288,maxWidth:f,initialWidth:x?.66*document.body.clientWidth:480,className:"max-w-[66%] xl:max-w-none",children:v()})}function e6(e){let{children:t}=e,s=(0,r.g)(),a=(0,B.t)(Q.Z("list")),l=(0,F.r)(),{os:o}=(0,ea.i)(),c=(0,v.useSession)(),d=(0,J.usePathname)(),u=!(null==d?void 0:d.startsWith("/coming-soon")),h=(0,q.F)(Q.Z("showAgeVerification")),p=(0,q.F)(Q.Z("ageVerificationCallback"));(function(e){let[t,s]=(0,x.Z)("hasPreviouslyInitUserSettings",!1),{client:n}=(0,er.useStatsigClient)();(0,m.useEffect)(()=>{if(e.user){if((0,ex.g)(e.countryCode)&&(n.logEvent("initialize_gdpr_user_settings",e.countryCode,{location:"loadout",countryCode:e.countryCode||"",hasPreviouslyInitUserSettings:String(t)}),!t)){q.F.getState().initializeGdprUserSettings().then(()=>s(!0)).catch(()=>(0,b.H)("loadout","Failed to initialize GDPR user settings"));return}q.F.getState().fetchGetUserSettings().catch(()=>(0,b.H)("loadout","Failed to load user settings"))}},[e.user,n])})(c),function(e){let{personalityPresets:t}=function(){let e=(0,r.g)(),{t}=(0,U.$G)("base"),s={concise:t("personality.concise.name","Concise"),formal:t("personality.formal.name","Formal"),socratic:t("personality.socratic.name","Socratic")},n={concise:t("personality.concise.description","Responds briefly and directly."),formal:t("personality.formal.description","Responds using a formal tone."),socratic:t("personality.socratic.description","Responds in a way to help you learn.")},i=(0,m.useMemo)(()=>{let t=(e.PERSONALITY_PRESETS.value.personalityPresets&&Array.isArray(e.PERSONALITY_PRESETS.value.personalityPresets)?e.PERSONALITY_PRESETS.value.personalityPresets:[]).map(e=>K.xn.safeParse(e)).filter(e=>e.success).map(e=>{var t,i;let{data:a}=e;return{...a,isPreset:!0,name:null!==(t=s[a.personalityId])&&void 0!==t?t:a.name,description:null!==(i=n[a.personalityId])&&void 0!==i?i:a.description}});return H().keyBy(t,e=>e.personalityId)},[e.PERSONALITY_PRESETS.value]);return{personalityPresets:(0,m.useMemo)(()=>Object.values(i),[i]),personalityPresetById:i}}();(0,m.useEffect)(()=>{K.Zv.getState().appendPersonalities(t)},[t]),(0,m.useEffect)(()=>{e.user&&K.Zv.getState().fetchListPersonalities().catch(e=>(0,b.H)("loadout:fetchList","Failed to load custom personalities: ".concat(e)))},[e.user])}(c);let g=(0,W.bP)();return(0,m.useEffect)(()=>{(c.user||c.anonUser)&&(g.isPending||V.p.setState(g))},[g,c.user,c.anonUser]),(0,m.useEffect)(()=>{!function(){let e=!1,t=0,s=0,n=null;function i(){"visible"===document.visibilityState&&(e||(e=!0,t=performance.now()),null!==n&&clearTimeout(n),n=setTimeout(a,1e4))}function a(){if(e){e=!1;let n=performance.now()-t;s+=n,null===X.IW||void 0===X.IW||X.IW.logEvent("session_active_time",n,{sessionActiveTimeMs:n.toString(),totalActiveTimeMs:s.toString()})}}document.addEventListener("mousemove",H().throttle(i,500)),document.addEventListener("keydown",H().throttle(i,500)),document.addEventListener("click",H().throttle(i,500)),document.addEventListener("scroll",H().throttle(i,500)),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&e&&a(),"visible"!==document.visibilityState||e||i()}),window.addEventListener("beforeunload",()=>{e&&a()})}()},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(es.Ou,{}),(0,n.jsx)(ee.W,{backend:et.PD,children:(0,n.jsxs)(D.pn,{delayDuration:300,skipDelayDuration:0,disableHoverableContent:!0,children:[!c.user&&!l&&!!a.length&&(0,n.jsx)(L,{}),(0,n.jsxs)(eh.o,{className:"flex w-full h-full",children:[(0,n.jsx)(f,{}),(0,n.jsxs)("div",{className:"flex w-full h-full @container/mainview",children:[s.SHOW_OPEN_IN_APP_DIALOG&&"ios"===o&&(0,n.jsx)(em,{}),h&&!c.user&&(0,n.jsx)(i.l$,{onPass:p}),u&&(0,n.jsx)(j,{}),t]}),(0,n.jsx)(e5,{})]}),s.SHOW_X_PREMIUM_FLOWS&&!s.SHOW_SUBSCRIPTION_FLOWS&&(0,n.jsx)(G.gD,{}),s.SHOW_SUBSCRIPTION_FLOWS&&(0,n.jsx)(A.ev,{}),(0,n.jsx)(e3,{})]})}),!1]})}function e3(){let{t:e}=(0,U.$G)("base"),t=$(),s=(0,m.useRef)(null);return(0,m.useEffect)(()=>{t||s.current?s.current&&(y.Am.dismiss(s.current),s.current=null):s.current=y.Am.error(e("You are offline"),{duration:1/0})},[t]),null}},14714:function(e,t,s){"use strict";s.d(t,{Ou:function(){return S},et:function(){return P}});var n=s(2899),i=s(69492),a=s(26777),r=s(34116),l=s(77119),o=s(4694);let c={};function d(e,t){let s=(0,o.useRef)("function"==typeof t?t():t).current,[n,i]=(0,o.useState)(()=>{try{let t=window.sessionStorage.getItem(e);return t?JSON.parse(t):s}catch(e){return console.error("Error parsing sessionStorage value:",e),s}});return(0,o.useEffect)(()=>{let t=e=>{i(e)};return c[e]||(c[e]=[]),c[e].push(t),()=>{c[e]&&(c[e]=c[e].filter(e=>e!==t))}},[e]),(0,o.useEffect)(()=>{let t=t=>{if(t.key===e&&t.storageArea===window.sessionStorage){if(null!==t.newValue)try{i(JSON.parse(t.newValue))}catch(e){console.error("Error parsing storage event value:",e)}else i(s)}};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}},[e,s]),[n,t=>{try{let s="function"==typeof t?t(n):t;window.sessionStorage.setItem(e,JSON.stringify(s)),i(s),c[e]&&c[e].forEach(e=>e(s))}catch(e){console.error("Error setting sessionStorage value:",e)}}]}var u=s(14901),m=s(20592),x=s(72242),h=s(69735),f=s(73197),p=s(98145),v=s(30722),g=s.n(v),b=s(41916),y=s(56672),j=s(70702);let w="HcydF4kDI5";function N(){var e;let{user:t}=(0,a.kP)(),[s]=d(w,!1);return(null==t?void 0:null===(e=t.email)||void 0===e?void 0:e.endsWith(atob("QHguYWk=")))&&!s}function S(){let{t:e}=(0,j.$G)("base"),[,t]=d(w,!1),{isChatPage:s,isSharePage:i,pageData:a}=(0,l.o)();return N()?(0,n.jsxs)("div",{className:"absolute top-0 right-1/2 translate-x-1/2 z-50 flex items-center gap-0",children:[s&&(0,n.jsx)(k,{}),i&&(null==a?void 0:a.shareLinkId)&&(0,n.jsx)(E,{shareLinkId:a.shareLinkId}),(0,n.jsx)(r.zx,{variant:"ghost",size:"iconSm",onClick:()=>{t(!0)},"aria-label":e("debug-menu-close.label","Close"),children:(0,n.jsx)(b.Z,{size:10})})]}):null}function E(e){let{shareLinkId:t}=e,{data:s}=(0,p.aM)({queryKey:["share",t],queryFn:()=>(0,u.z)(t,h.xU)});return s?(0,n.jsxs)("div",{className:"text-red-600 font-normal text-xs flex flex-row gap-1",children:[(0,n.jsx)("span",{children:"convo id: "}),(0,n.jsx)("span",{className:"block",children:null==s?void 0:s.conversation.conversationId})]}):null}function k(){let e=(0,i.gK)(y.Z("lastMessageId")),t=(0,f.CI)(y.Z("byId"));return(0,n.jsx)(r.zx,{className:"text-red-600 font-normal",variant:"text",size:"none",onClick:()=>{(function(e,t){if(!e){console.error("No last message id");return}let s=t[e];if(!s){console.error("No response for last message id",e);return}let n=new Blob([JSON.stringify((0,m.Bv)(s,t).map(e=>t[e]).map(e=>({role:"human"===e.sender?"user":"assistant",content:e.message,...g().pick(e,"thinkingTrace","steps","generatedImageUrls","metadata")})),null,2)],{type:"application/json"}),i=window.URL.createObjectURL(n);window.open(i,"_blank")})(e,t)},children:"export"})}function P(e){let{response:t}=e;return N()?(0,n.jsxs)("div",{className:(0,x.cn)("absolute text-red-600 font-normal text-xs bottom-[2.5rem]","opacity-0 group-focus-within:opacity-100 group-hover:opacity-100 transition-opacity","flex flex-row gap-1"),children:[(0,n.jsx)("span",{children:"res id: "}),(0,n.jsx)("span",{className:"block",children:t.responseId})]}):null}},75260:function(e,t,s){"use strict";s.d(t,{L:function(){return D},Q:function(){return M}});var n=s(2899),i=s(37330),a=s(69492),r=s(77119),l=s(81211),o=s(8781),c=s(89099),d=s(17010),u=s(72242),m=s(69735),x=s(13771),h=s(74239),f=s(98145),p=s(62719),v=s(11286),g=s(66218),b=s(94529),y=s(65671),j=s(13562),w=s(3667),N=s(73069),S=s(56672),E=s(4694),k=s(70702),P=s(75361),C=s(63994),I=s(4710),_=s(34116),z=s(27763);let R=()=>(0,n.jsxs)("div",{className:"relative w-8 h-8 flex items-center justify-center filter blur-[1.5px]",children:[(0,n.jsx)(w.E.div,{className:"absolute w-4 h-4 rounded-full bg-opacity-90 shadow-lg",style:{background:"radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0) 70%)",boxShadow:"inset 2px 2px 4px rgba(255, 255, 255, 0.5), inset -2px -2px 4px rgba(0, 0, 0, 0.3)"},animate:{background:["radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8) 0%, rgba(139, 92, 246, 0.8) 50%, rgba(236, 72, 153, 0.8) 100%)","radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8) 0%, rgba(59, 130, 246, 0.8) 50%, rgba(139, 92, 246, 0.8) 100%)","radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8) 0%, rgba(139, 92, 246, 0.8) 50%, rgba(59, 130, 246, 0.8) 100%)","radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8) 0%, rgba(139, 92, 246, 0.8) 50%, rgba(236, 72, 153, 0.8) 100%)"],scale:[1,1.1,1]},transition:{duration:6,ease:"linear",repeat:1/0,times:[0,.33,.66,1]}}),(0,n.jsx)("div",{className:"absolute w-0.5 h-0.5 rounded-full bg-white opacity-5 blur-[2px]",style:{top:"35%",left:"35%"}}),(0,n.jsx)(w.E.div,{className:"absolute w-4 h-4 rounded-full",style:{border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"inset 0 0 5px rgba(255, 255, 255, 0.5)"},animate:{opacity:[.7,.5,.7]},transition:{duration:3,ease:"easeInOut",repeat:1/0}})]});function M(e){let{responseId:t,memoryReferences:s}=e,{t:i}=(0,k.$G)("base"),r=(0,l.g)(),{client:c}=(0,h.useStatsigClient)(),d=(0,a.gK)(S.Z("sidePanelContent")),u=(0,a.gK)(S.Z("setSidePanelContent")),m=(0,o.w)(),x=(0,E.useMemo)(()=>{if((null==d?void 0:d.type)!=="memoryReferences")return!1;let e=d.data.memoryReferences.map(e=>e.conversationId);return s.every((t,s)=>t.conversationId===e[s])&&s.length===e.length},[d,s]),f=(0,E.useCallback)(()=>{if(x){u(void 0);return}c.logEvent("open_memory_reference_list",t),u({type:"memoryReferences",data:{responseId:t,memoryReferences:s}})},[x,s,t]);return 0===s.length?null:(0,n.jsx)(_.g$,{"aria-label":i("response-action.memory-references","Referenced Chats"),tooltipContent:(0,n.jsx)("p",{children:i("response-action.memory-references","Referenced Chats")}),tooltipContentProps:{side:"bottom"},variant:"ghostSecondary",size:m?"iconXl":"iconMd",onClick:f,children:(0,n.jsx)(z.k,{children:r.SHOW_ORB_ICON_MEMORY?(0,n.jsx)(R,{}):x?(0,n.jsx)(C.vJ,{className:"size-4 text-primary"}):(0,n.jsx)(C.vJ,{className:"size-4"})},x?"selected":"not-selected")})}function O(e){return e.charAt(0).toUpperCase()+e.slice(1)}function U(e){let{conversation:t}=e,s=(0,E.useMemo)(()=>{if(t.modifyTime||t.createTime)return function(e){let t=new Date(e),s=new Date,n=(s.getTime()-t.getTime())/864e5;return n<1?O((0,p.U)(e,s,{locale:d.Z.language})):n<7?O((0,p.U)(e,s,{unit:"day",locale:d.Z.language})):t.getFullYear()===s.getFullYear()?t.toLocaleDateString(d.Z.language,{day:"numeric",month:"short"}):t.toLocaleDateString(d.Z.language,{day:"numeric",month:"short",year:"numeric"})}(t.modifyTime||t.createTime)},[t.modifyTime,t.createTime]);return s?(0,n.jsx)("span",{className:(0,u.cn)("text-secondary text-sm"),children:s}):null}function T(e){let{responseId:t,memoryConversationId:s,onSettled:i,onlyShowOnHover:r}=e,{t:l}=(0,k.$G)("base"),{client:o}=(0,h.useStatsigClient)(),c=(0,f.NL)(),d=(0,a.gK)(S.Z("conversationId")),[u,x]=(0,E.useState)(!1),p=(0,E.useCallback)(e=>{e.stopPropagation(),o.logEvent("begin_forget_memory_reference",t,{responseId:t,memoryConversationId:s,threadConversationId:null!=d?d:""}),x(!0);let n=setTimeout(()=>{x(!1)},3e3);return()=>clearTimeout(n)},[s,t]),{mutate:g,isPending:b}=(0,f.Db)({mutationFn:()=>m.xU.chatDeleteMemory({conversationIds:[s]}),onError:()=>{x(!1),P.Am.error(l("Failed to delete memory"))},onSettled:()=>{x(!1),c.invalidateQueries({queryKey:["memories",t]}).catch(()=>{P.Am.error(l("Failed to refresh memory list"))}),null==i||i()}});return(0,n.jsx)(n.Fragment,{children:u?(0,n.jsx)(_.zx,{onClick:e=>{e.stopPropagation(),o.logEvent("forget_memory_reference",t,{responseId:t,memoryConversationId:s,threadConversationId:null!=d?d:""}),g()},variant:"destructive",size:"pill",children:b?(0,n.jsx)(v.Z,{className:"size-4 animate-spin"}):l("Confirm")}):(0,n.jsx)(_.zx,{className:r?"opacity-0 group-hover:opacity-100 transition-opacity duration-200":"",onClick:p,variant:"secondary",size:"pill",children:l("Forget")})})}function Z(e){let{responseId:t,memory:s,onClick:i}=e,{convoId:a,convoSummary:r}=s,o=(0,x.t)(S.Z("fetchGetConversation")),d=(0,l.g)(),m=(0,E.useCallback)(e=>{e.stopPropagation(),i()},[a,i]),{data:h,isLoading:f,error:p}=(0,c.f)(a?o(a):void 0),v=(0,E.useMemo)(()=>null==r?void 0:r.split("\n").map(e=>e.replace(/^[- ]*/,"")).join("\n"),[r]);return f||p||!h?null:(0,n.jsx)("div",{className:(0,u.cn)("block text-base hover:bg-card-hover rounded-xl focus:outline-none focus-within:outline-none focus-visible:ring-1 focus-visible:ring-ring w-full cursor-pointer"),onClick:m,children:(0,n.jsxs)("div",{className:"flex flex-row items-center justify-between gap-4 p-4 group",children:[(0,n.jsxs)("div",{className:(0,u.cn)("flex flex-col gap-2 max-w-[400px]",d.SHOW_MEMORY_SUMMARY&&"max-w-[600px]"),children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-sm text-primary",children:h.title||"Untitled Memory"}),(0,n.jsx)("span",{className:"text-secondary text-sm",children:"  •  "}),(0,n.jsx)(U,{conversation:h})]}),d.SHOW_MEMORY_SUMMARY&&(0,n.jsx)("div",{className:"max-h-[100px] overflow-hidden pb-4 -mb-4 fade-mask-bottom",children:(0,n.jsx)("p",{className:"mt-1 text-xs text-primary ",children:v})})]}),!d.SHOW_MEMORY_SUMMARY&&(0,n.jsx)(T,{responseId:t,memoryConversationId:a,onlyShowOnHover:!0})]})})}function L(e){let{responseId:t,memory:s,onOpen:a,onBack:r}=e,{convoId:l,convoSummary:o}=s,d=(0,x.t)(S.Z("fetchGetConversation")),{data:m,isLoading:h,error:f}=(0,c.f)(l?d(l):void 0),p=(0,E.useMemo)(()=>null==o?void 0:o.split("\n").map(e=>e.replace(/^[- ]*/,"")).join("\n\n"),[o]);return h||f||!m?null:(0,n.jsxs)("div",{className:(0,u.cn)("p-4 max-w-[600px]"),children:[(0,n.jsxs)("div",{className:"flex flex-row items-center justify-between gap-4",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,n.jsx)(_.zx,{variant:"ghostSecondary",size:"iconSm",onClick:()=>r(),children:(0,n.jsx)(g.Z,{className:"size-4"})}),(0,n.jsxs)("div",{className:"group flex flex-row items-center gap-1 cursor-pointer relative",onClick:()=>a(),children:[(0,n.jsx)("span",{children:m.title||"Untitled Memory"}),(0,n.jsx)(b.Z,{size:12,className:"text-primary"}),(0,n.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-px bg-primary opacity-0 group-hover:opacity-100"})]})]}),(0,n.jsx)(T,{responseId:t,memoryConversationId:l,onSettled:()=>{r()}})]}),(0,n.jsx)("div",{className:"p-4 prose dark:prose-invert",children:(0,n.jsx)(i.Cn,{sender:"",webSearchResults:[],xposts:[],children:null!=p?p:""})})]})}function D(e){let{responseId:t,memoryReferences:s}=e,{t:i}=(0,k.$G)("base"),a=(0,l.g)(),{routeToConversation:o}=(0,r.o)(),{client:c}=(0,h.useStatsigClient)(),{data:d,isLoading:x,error:p,refetch:v}=(0,f.aM)({queryKey:["memories",t],queryFn:()=>{let e=s.map(e=>e.conversationId).filter(e=>void 0!==e);return m.xU.chatGetMemory({body:{conversationIds:e}})}}),[g,b]=(0,E.useState)(null),S=(0,E.useCallback)(e=>{var s;c.logEvent("open_memory_reference",t,{memoryConversationId:null!==(s=e.convoId)&&void 0!==s?s:""}),a.OPEN_MEMORY_IN_NEW_TAB?window.open("/chat/".concat(e.convoId),"_blank"):o(e.convoId)},[]);if(x)return(0,n.jsx)("div",{className:"flex flex-col items-center px-4 pt-1 pb-2 gap-2",children:(0,n.jsx)(I.S,{})});if(p)return(0,n.jsx)("div",{className:"flex flex-col items-center px-4 pt-1 pb-2 gap-2 w-full",children:(0,n.jsx)(w.E.div,{initial:{translateY:5,opacity:0},animate:{translateY:0,opacity:1},exit:{translateY:5,opacity:0},className:(0,u.cn)("w-fit","p-4 bg-card","shadow-sm","border border-input-border rounded-2xl","ml-4 md:mx-4"),children:(0,n.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,n.jsx)(y.Z,{className:(0,u.cn)("h-5 w-5 flex-shrink-0")}),(0,n.jsx)("div",{className:"flex-1 max-w-96",children:(0,n.jsx)("div",{className:"text-primary text-sm",children:i("memory.error","Failed to load memories.")})}),(0,n.jsxs)(_.zx,{variant:"secondary",size:"pill",onClick:()=>{v()},children:[(0,n.jsx)(j.Z,{className:"mr-2 h-4 w-4"}),i("Retry")]})]})})});if(!d||!d.memories)return(0,n.jsx)("div",{className:"flex flex-col items-center px-4 pt-1 pb-2 gap-2",children:(0,n.jsx)("p",{className:"text-sm text-primary",children:i("memory.no-memories","No memories to display.")})});let P=d.memories;return a.SHOW_MEMORY_SUMMARY?(0,n.jsx)(N.M,{children:(0,n.jsx)("div",{className:"flex flex-row",children:g?(0,n.jsx)(w.E.div,{initial:{x:200,opacity:0},animate:{x:0,opacity:1},exit:{x:200,opacity:0},transition:{duration:.1},className:"w-full",children:(0,n.jsx)(L,{responseId:t,memory:g,onOpen:()=>S(g),onBack:()=>b(null)})},"memory-detail"):(0,n.jsx)(w.E.div,{initial:{x:-200,opacity:0},animate:{x:0,opacity:1},exit:{x:-200,opacity:0},transition:{duration:.1},className:"flex flex-col items-center px-4 pt-1 pb-2 gap-2",children:P.length>0?null==P?void 0:P.map(e=>(0,n.jsx)(Z,{responseId:t,memory:e,onClick:()=>b(null!=e?e:null)},e.convoId)):(0,n.jsx)("p",{className:"text-sm text-primary",children:i("No memories to display.")})},"memory-list")})}):(0,n.jsx)("div",{className:"flex flex-col items-center px-4 pt-1 pb-2 gap-2",children:P.length>0?null==P?void 0:P.map(e=>(0,n.jsx)(Z,{responseId:t,memory:e,onClick:()=>S(e)},e.convoId)):(0,n.jsx)("p",{className:"text-sm text-primary",children:i("memory.no-memories","No memories to display.")})})}},9593:function(e,t,s){"use strict";let n;s.d(t,{QueryClientProvider:function(){return o}});var i=s(2899),a=s(98145);let r=()=>new a.Su({defaultOptions:{queries:{staleTime:6e4}}}),l=()=>a.sk?r():(n||(n=r()),n),o=e=>{let{children:t,dehydratedState:s}=e,n=l();return(0,i.jsx)(a.aH,{client:n,children:(0,i.jsx)(a.Rq,{state:s,children:t})})}},38199:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});var n=s(2899),i=s(72242);function a(e){let{className:t,...s}=e;return(0,n.jsx)("div",{className:(0,i.cn)("animate-pulse rounded-md bg-primary/10",t),...s})}},2043:function(e,t,s){"use strict";s.d(t,{Toaster:function(){return o}});var n=s(2899),i=s(72242),a=s(65671),r=s(40881),l=s(75361);let o=e=>{let{...t}=e,{theme:s}=(0,r.F)();return(0,n.jsx)(l.x7,{theme:s,className:"toaster group",toastOptions:{classNames:{toast:(0,i.cn)("group toast bg-popover rounded-2xl border-0 shadow-sm","w-fit min-w-[200px] right-0","ring-1 ring-inset ring-input-border","p-3.5 h-fit"),title:"text-primary font-bold",icon:"ml-0 mr-1",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},icons:{error:(0,n.jsx)(a.Z,{size:18})},...t})}},34820:function(e,t,s){"use strict";s.d(t,{gD:function(){return S},nm:function(){return k}});var n=s(2899),i=s(34116),a=s(40955),r=s(72242),l=s(69735),o=s(98145),c=s(44093),d=s(74866),u=s(14075),m=s(4694),x=s(70702),h=s(26777),f=s(37446);let p={initial:{opacity:0,y:4},animate:{opacity:1,y:0}},v=(0,n.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 16 16",children:(0,n.jsx)("path",{d:"M14.667 8C10.037 8 8 10.039 8 14.668c0-4.63-2.037-6.666-6.667-6.666C5.963 8 8 5.964 8 1.334c0 4.63 2.037 6.667 6.667 6.667Z",stroke:"currentColor",strokeWidth:1.3})}),g=e=>{let{initial:t}=e,{t:s}=(0,x.$G)("upsell-x");return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(c.E.div,{className:"relative flex flex-col items-center px-4 mx-auto space-y-4 text-sm text-white w-fit",children:(0,n.jsx)(c.E.ul,{transition:{duration:.2,delay:.2,delayChildren:.2,staggerChildren:.1},initial:t?"initial":"animate",animate:"animate",variants:p,className:(0,r.cn)("space-y-4 [&>li]:flex [&>li]:items-start [&>li]:gap-3"),children:s("benefits",{returnObjects:!0}).map((e,t)=>(0,n.jsxs)(c.E.li,{variants:p,children:[v,(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsx)("p",{className:"font-semibold",children:e}),(0,n.jsx)("p",{className:"text-secondary",children:s("benefitsDescriptions",{returnObjects:!0})[t]})]})]},t))})})})};function b(e){let{title:t,subtitle:s,initial:i}=e;return(0,n.jsxs)(c.E.header,{className:"flex flex-col items-center justify-center gap-2 px-4 text-center isolate",children:[(0,n.jsx)(c.E.figure,{layout:!0,className:"absolute top-0 left-0 w-full aspect-square -z-10",style:{y:-448,scale:1.3},initial:i?{opacity:0}:{opacity:1},animate:{rotate:[0,360],opacity:1},transition:{rotate:{duration:600,ease:"linear",repeat:1/0},opacity:{duration:5}},children:(0,n.jsx)(d.default,{src:"/upgrade-plan-hole.png",layout:"fill",className:"object-contain",alt:""})}),(0,n.jsx)(a.$N,{asChild:!0,children:(0,n.jsx)("h2",{className:"sm:text-[1.5rem] text-xl font-semibold text-white",children:t})}),(0,n.jsx)("p",{className:"sm:text-lg text-secondary",children:s})]})}function y(e){let{status:t,initial:s,...d}=e,{t:m}=(0,x.$G)("upsell-x"),p=(0,u.useRouter)(),v=(0,h.kP)(),{mutate:y,isPending:j}=(0,o.Db)({mutationFn:()=>{var e;return l.w$.authFrontendRefreshXSubscriptionStatus({body:{sessionId:null===(e=v.user)||void 0===e?void 0:e.sessionId}})},onSuccess:async()=>{await v.refreshSession()}});return(0,n.jsxs)(a.Vq,{...d,children:[(0,n.jsx)(a.t9,{}),(0,n.jsx)(a.cZ,{asChild:!0,children:(0,n.jsx)(c.E.div,{className:"fixed w-[calc(100%_-_2rem)] max-w-lg bg-transparent",layoutRoot:!0,children:(0,n.jsxs)(c.E.div,{className:(0,r.cn)("flex flex-col gap-12 bg-top bg-[length:100%] pt-32 pb-12 bg-no-repeat bg-black rounded-3xl overflow-hidden relative"),layout:!0,layoutDependency:t,transition:{type:"spring",duration:.5,bounce:.05},children:[(0,n.jsx)(b,{title:m("Grok 3 is now available"),subtitle:m("Subscribe to X Premium+ to get access"),initial:s}),(0,n.jsx)(g,{initial:s}),(0,n.jsxs)(c.E.footer,{transition:{duration:.2,delay:.5},initial:s&&{opacity:0,y:8},animate:{opacity:1,y:0},className:"w-full max-w-sm px-8 mx-auto mt-auto space-y-4 text-center",children:[(0,n.jsxs)("div",{className:"space-y-3",children:[("GUEST"===t||"NO_X"===t)&&(0,n.jsx)(i.zx,{variant:"secondary",size:"pill",className:(0,r.cn)("w-full dark:bg-white dark:text-black h-12 text-base font-semibold transition-all duration-500 outline-none focus-visible:ring-white/10","hover:ring-2 ring-inset ring-white/10"),asChild:!0,onClick:()=>{"GUEST"===t&&p.push("/sign-in?auth_methods=x")},children:(0,n.jsx)(c.E.button,{layout:"position",transition:{type:"spring",duration:.5,bounce:.05},children:(0,n.jsx)(c.E.span,{initial:{y:8,opacity:0},animate:{y:0,opacity:1},exit:{y:-8,opacity:0},children:m("Continue with X")})})}),"NO_PREMIUM"===t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.zx,{variant:"secondary",size:"pill",className:(0,r.cn)("w-full dark:bg-white dark:text-black h-12 text-base font-semibold transition-all duration-500 outline-none focus-visible:ring-white/10","hover:ring-2 ring-inset ring-white/10"),asChild:!0,onClick:()=>{window.open("https://x.com/i/premium_sign_up?referring_page=grok_3&redirectAfterSuccess=grok.com&tier=premium_plus","_blank")},children:(0,n.jsx)(c.E.button,{layout:"position",transition:{type:"spring",duration:.5,bounce:.05},children:(0,n.jsx)(c.E.span,{initial:{y:8,opacity:0},animate:{y:0,opacity:1},exit:{y:-8,opacity:0},children:m("Get X Premium +")})})}),(0,n.jsx)(i.zx,{variant:"card",size:"pill",className:(0,r.cn)("w-full h-12 text-base font-semibold transition-all bg-white/10 text-white/40 duration-500 outline-none ring-inset ring-white/10","hover:ring-2 hover:bg-white/15 hover:text-white focus-visible:ring-white/5"),asChild:!0,onClick:()=>{y()},disabled:j,children:(0,n.jsx)(c.E.button,{layout:"position",transition:{type:"spring",duration:.5,bounce:.05},children:(0,n.jsx)(c.E.span,{initial:{y:8,opacity:0},animate:{y:0,opacity:1},exit:{y:-8,opacity:0},children:j?(0,n.jsx)(f.$,{className:"w-4 h-4"}):m("Restore purchase")})})})]}),"PREMIUM"===t&&(0,n.jsx)(i.zx,{variant:"secondary",size:"pill",className:(0,r.cn)("w-full dark:bg-white dark:text-black h-12 text-base font-semibold transition-all duration-500 outline-none focus-visible:ring-white/10","hover:ring-2 ring-inset ring-white/10"),asChild:!0,onClick:()=>{var e;null===(e=d.onOpenChange)||void 0===e||e.call(d,!1)},children:(0,n.jsx)(c.E.button,{layout:"position",transition:{type:"spring",duration:.5,bounce:.05},children:(0,n.jsx)(c.E.span,{initial:{y:8,opacity:0},animate:{y:0,opacity:1},exit:{y:-8,opacity:0},children:m("Try it now")})})})]}),(0,n.jsx)("p",{className:"text-sm leading-none text-secondary",children:m("Limits apply")})]})]})})})]})}var j=s(86141),w=s(56672),N=s(6240);let S=()=>{let e=(0,h.kP)().user,[t,s]=(0,N.Z)("upsell-x-revealed",!1),[i,a]=(0,m.useState)(!1),[r,l]=(0,m.useState)("GUEST"),o=(0,j.G)(w.Z("isUpsellingX")),c=(0,j.G)(w.Z("setIsUpsellingX"));return(0,m.useEffect)(()=>e?"PremiumPlus"===e.xSubscriptionType?l("PREMIUM"):e.xUserId?l("NO_PREMIUM"):e.xUserId?void 0:l("NO_X"):l("GUEST"),[]),(0,n.jsx)(y,{open:!t||o,initial:!i,status:r,onOpenChange:e=>{c(e),a(!0),s(!0)}})};var E=s(41916);function k(){let e=(0,h.kP)().user,{t}=(0,x.$G)("upsell-x"),[s,a]=(0,N.Z)("upsell-x-dismissed",!1),l=(0,j.G)(w.Z("isUpsellingX")),o=(0,j.G)(w.Z("setIsUpsellingX"));if(!s&&!l&&(null==e?void 0:e.xSubscriptionType)!=="PremiumPlus")return(0,n.jsxs)("div",{role:"button",className:(0,r.cn)("fixed p-3 sm:p-4 w-[calc(100%-1rem)] sm:max-w-fit items-center bg-black text-xs text-white border cursor-pointer border-white/20 hover:border-white/30 rounded-3xl sm:bottom-2 left-1/2 -translate-x-1/2 group bg-[url(/upgrade-plan-hole.png)] bg-[length:175%] bg-no-repeat bg-top transition-all duration-500 text-left flex gap-8 group",{"bottom-[10.5rem]":!e}),onClick:()=>o(!0),children:[(0,n.jsx)(i.zx,{size:"iconSm",className:"absolute bg-black hover:bg-gray-800 ring-1 ring-inset ring-white/10 -top-1.5 -right-1.5 group-hover:scale-100 group-hover:opacity-100 opacity-0 scale-75 transition-all duration-200",onClick:e=>{e.stopPropagation(),a(!0)},children:(0,n.jsx)(E.Z,{className:"w-4 h-4"})}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("p",{className:"font-semibold sm:text-lg",children:t("Grok 3 is now available")}),(0,n.jsx)("p",{className:"hidden text-sm sm:block text-white/80 sm:whitespace-nowrap",children:t("Subscribe to X Premium+ to get access")})]}),(0,n.jsx)(i.zx,{size:"pill",variant:"secondary",className:"text-sm font-semibold transition-all dark:bg-white dark:text-black",children:t((null==e?void 0:e.xUserId)?"Get X Premium +":"Continue with X")})]})}},89099:function(e,t,s){"use strict";s.d(t,{f:function(){return i}});var n=s(4694);function i(e){let t=(0,n.useRef)();t.current=e;let[s,i]=(0,n.useState)(),[a,r]=(0,n.useState)(),[l,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),[u,m]=(0,n.useState)(!1),[x,h]=(0,n.useState)(!1),[f,p]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{if(!e){i(void 0),r(void 0),o(!0),d(!1),m(!1),h(!0),p(!1);return}if(!x){h(!0);return}let s={status:"UNSET",value:void 0,error:void 0};e.then(n=>{t.current===e&&("PASSED"===s.status?(i(n),r(void 0),o(!0),d(!1),m(!1)):(s.status="SETVALUE",s.value=n))}).catch(n=>{t.current===e&&("PASSED"===s.status?(i(void 0),r(n),o(!1),d(!0),m(!1)):(s.status="SETERROR",s.error=n))}),setTimeout(()=>{if(t.current===e){switch(p(!1),s.status){case"UNSET":i(void 0),r(void 0),o(!1),d(!1),m(!0);break;case"SETVALUE":i(s.value),r(void 0),o(!0),d(!1),m(!1);break;case"SETERROR":i(void 0),r(s.error),o(!1),d(!0),m(!1)}s.status="PASSED"}})},[x,e]),{data:s,error:a,isResolved:l,isErrored:c,isLoading:u,isUninitialized:f}}},14901:function(e,t,s){"use strict";s.d(t,{z:function(){return a}});var n=s(33263),i=s(69735);async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.xU,s=arguments.length>2?arguments[2]:void 0,a=await t.chatGetShareLink({shareLinkId:e},{headers:s});if(!a.conversation)throw Error("Conversation not found.");if(!a.responses||0===a.responses.length)throw Error("No responses in conversation.");let r={...a.conversation,personaId:(0,n.BV)(a.conversation.systemPromptName)};return{responses:a.responses.map(e=>({...e,conversationId:r.conversationId,state:"closed"})),conversation:r}}},40794:function(e,t,s){"use strict";s.d(t,{_:function(){return o},o:function(){return d}});var n=s(2899),i=s(4694),a=s(13341),r=s(15419);let l=(0,i.createContext)(null);function o(e,t){let s=(0,i.useContext)(l);if(!s)throw Error("Add GlobalFileDropProvider when using useGlobalFileDrop");let n=(0,i.useRef)(Symbol("useGlobalFileId")),{collectedProps:a,hookId:r,subscribe:o}=s;return(0,i.useEffect)(()=>{if(r&&r!==n.current){console.warn("Other component already taken over GlobaFileDropProvider");return}return o({options:"function"==typeof e?e():e,hookId:n.current}),()=>{o(null)}},[o,...null!=t?t:[]]),a}let c={accept:[r.FILE]};function d(e){var t,s;let{className:r,children:o}=e,[d,u]=(0,i.useState)(null),m=(0,i.useRef)(null),x=null!==(t=null==d?void 0:d.options)&&void 0!==t?t:c,[h,f]=(0,a.L)(x);f(m);let p=null!==(s=null==d?void 0:d.hookId)&&void 0!==s?s:null,v=(0,i.useMemo)(()=>({collectedProps:h,hookId:p,subscribe:u}),[h,u,p]);return(0,n.jsx)("div",{ref:m,className:r,"data-testid":"global-drop",children:(0,n.jsx)(l.Provider,{value:v,children:o})})}},88669:function(e,t,s){"use strict";s.d(t,{DirectionProvider:function(){return c}});var n=s(2899),i=s(74239),a=s(87325),r=s(78147),l=s(4694),o=s(88101);function c(e){let{children:t}=e,[s,c]=(0,l.useState)(()=>(0,o.w1)(a.ZP.language)),{client:d}=(0,i.useStatsigClient)();return(0,l.useEffect)(()=>{let e=e=>{a.ZP.isInitializing||d.logEvent("locale_changed",e,{languages:a.ZP.languages.join(", "),location:"src/lib/locales/direction-provider"});let t=(0,o.w1)(e);"rtl"===t?document.body.dir=t:document.body.dir="",c(t)};return a.ZP.on("languageChanged",e),()=>a.ZP.off("languageChanged",e)},[]),(0,n.jsx)(r.zt,{dir:s,children:t})}},74417:function(e,t,s){"use strict";s.d(t,{_:function(){return a}});var n=s(29598);class i{constructor(e,t){this.set=e,this.get=t,this.isUpselling=!1,this.setIsUpselling=(0,n.f0)(this.set,"isUpselling")}}let a=(0,n.MT)(i);"#subscribe"===window.location.hash&&a.getState().setIsUpselling(!0),a.subscribe((e,t)=>{var s;e.isUpselling!==t.isUpselling&&(s=e.isUpselling?"subscribe":void 0,window.history.pushState({},"","".concat(window.location.pathname).concat(s?"#".concat(s):"")))}),window.addEventListener("popstate",()=>{let e=window.location.hash;a.getState().setIsUpselling("#subscribe"===e)})},86141:function(e,t,s){"use strict";s.d(t,{G:function(){return a}});var n=s(29598);class i{constructor(e,t){this.set=e,this.get=t,this.isUpsellingX=!1,this.setIsUpsellingX=(0,n.f0)(this.set,"isUpsellingX")}}let a=(0,n.MT)(i);"#subscribe"===window.location.hash&&a.getState().setIsUpsellingX(!0),a.subscribe((e,t)=>{var s;e.isUpsellingX!==t.isUpsellingX&&(s=e.isUpsellingX?"subscribe":void 0,window.history.replaceState({},"","".concat(window.location.pathname).concat(s?"#".concat(s):"")))})},30745:function(){}},function(e){e.O(0,[3759,5493,1093,6299,536,9782,6791,4947,7134,1577,4232,3193,2456,8385,8196,4558,422,5974,9321,1868,7261,5132,6485,3335,4132,124,2910,8907,9948,2063,83,4072,1744],function(){return e(e.s=86986)}),_N_E=e.O()}]);